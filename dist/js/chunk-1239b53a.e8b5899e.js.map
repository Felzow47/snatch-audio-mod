{"version":3,"sources":["webpack:///./node_modules/m3u8stream/dist/queue.js","webpack:///./node_modules/ytdl-core/lib/utils.js","webpack:///./node_modules/m3u8stream/dist/parse-time.js","webpack:///./node_modules/ytdl-core/lib/url-utils.js","webpack:///./node_modules/sax/lib/sax.js","webpack:///./node_modules/miniget/dist/index.js","webpack:///./node_modules/m3u8stream/dist/m3u8-parser.js","webpack:///./node_modules/ytdl-core/lib/info.js","webpack:///./node_modules/ytdl-core/lib/sig.js","webpack:///./node_modules/ytdl-core/lib/index.js","webpack:///./node_modules/ytdl-core/lib/cache.js","webpack:///./src/components/ProgressBar.vue?8ada","webpack:///./node_modules/m3u8stream/dist/dash-mpd-parser.js","webpack:///./src/components/ProgressBar.vue?5557","webpack:///src/components/ProgressBar.vue","webpack:///./src/components/ProgressBar.vue?40bc","webpack:///./src/components/ProgressBar.vue?24ed","webpack:///./src/views/Home.vue?5391","webpack:///./node_modules/omodei/index.js","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2b8c","webpack:///./src/views/Home.vue?a0f1","webpack:///./node_modules/m3u8stream/dist/index.js","webpack:///./src/views/Home.vue?33cf","webpack:///./node_modules/ytdl-core/lib/formats.js","webpack:///./node_modules/ytdl-core/lib/info-extras.js","webpack:///./node_modules/ytdl-core/lib/format-utils.js"],"names":["Object","defineProperty","exports","value","Queue","worker","options","this","_worker","_concurrency","concurrency","tasks","total","active","item","callback","push","_next","length","shift","callbackCalled","err","result","miniget","between","haystack","left","right","pos","RegExp","match","index","indexOf","slice","parseAbbreviatedNumber","string","replace","num","multi","parseFloat","Math","round","cutAfterJSON","mixedJson","open","close","Error","i","isString","isEscaped","counter","substr","playError","player_response","statuses","ErrorType","playability","playabilityStatus","includes","status","reason","messages","exposedMiniget","url","requestOptionsOverwrite","req","requestOptions","requestCallback","deprecate","obj","prop","oldPath","newPath","get","console","warn","pkg","UPDATE_INTERVAL","lastUpdateCheck","checkForUpdates","YTDL_NO_UPDATE","version","startsWith","Date","now","headers","text","then","response","JSON","parse","tag_name","message","durationStr","humanStr","numberFormat","timeFormat","timeUnits","ms","s","m","h","time","test","firstFormat","exec","r","rs","toLowerCase","validQueryDomains","Set","validPathDomains","getURLVideoID","link","parsed","URL","id","searchParams","paths","pathname","split","host","hostname","has","substring","validateID","TypeError","idRegex","toString","urlRegex","getVideoID","str","validateURL","e","sax","parser","strict","opt","SAXParser","SAXStream","createStream","MAX_BUFFER_LENGTH","Stream","buffers","clearBuffers","q","c","bufferCheckPosition","lowercase","lowercasetags","looseCase","tags","closed","closedRoot","sawRoot","tag","error","noscript","state","S","BEGIN","strictEntities","ENTITIES","create","XML_ENTITIES","attribList","xmlns","ns","rootNS","trackPosition","position","line","column","emit","checkBufferLength","maxAllowed","max","maxActual","l","len","closeText","emitNode","cdata","script","flushBuffers","EVENTS","o","F","prototype","newf","keys","a","hasOwnProperty","end","write","resume","flush","ex","streamWraps","filter","ev","apply","_parser","writable","readable","me","onend","onerror","er","_decoder","forEach","set","removeAllListeners","on","enumerable","configurable","constructor","data","Buffer","isBuffer","SD","StringDecoder","chunk","handler","args","arguments","Array","splice","call","CDATA","DOCTYPE","XML_NAMESPACE","XMLNS_NAMESPACE","xml","nameStart","nameBody","entityStart","entityBody","isWhitespace","isQuote","isAttribEnd","isMatch","regex","notMatch","STATE","BEGIN_WHITESPACE","TEXT","TEXT_ENTITY","OPEN_WAKA","SGML_DECL","SGML_DECL_QUOTED","DOCTYPE_QUOTED","DOCTYPE_DTD","DOCTYPE_DTD_QUOTED","COMMENT_STARTING","COMMENT","COMMENT_ENDING","COMMENT_ENDED","CDATA_ENDING","CDATA_ENDING_2","PROC_INST","PROC_INST_BODY","PROC_INST_ENDING","OPEN_TAG","OPEN_TAG_SLASH","ATTRIB","ATTRIB_NAME","ATTRIB_NAME_SAW_WHITE","ATTRIB_VALUE","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_CLOSED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG","CLOSE_TAG_SAW_WHITE","SCRIPT","SCRIPT_ENDING","key","String","fromCharCode","event","nodeType","textNode","textopts","trim","normalize","strictFail","newTag","tagName","parent","name","attributes","qname","attribute","qualName","prefix","local","attrib","attribName","attribValue","qn","openTag","selfClosing","uri","stringify","p","nv","isSelfClosing","closeTag","t","closeTo","pop","x","n","parseEntity","entity","entityLC","numStr","charAt","parseInt","isNaN","fromCodePoint","beginWhiteSpace","startTagPosition","starti","sgmlDecl","procInstName","procInstBody","pad","join","toUpperCase","comment","doctype","body","returnState","buffer","stringFromCharCode","floor","highSurrogate","lowSurrogate","MAX_SIZE","codeUnits","codePoint","Number","isFinite","RangeError","__importDefault","mod","__esModule","http_1","https_1","stream_1","httpLibs","default","redirectStatusCodes","retryStatusCodes","requestEvents","responseEvents","Miniget","_a","opts","assign","defaultOptions","stream","PassThrough","highWaterMark","activeRequest","activeResponse","activeDecodedStream","destroyed","aborted","retryTimeout","contentLength","rangeEnd","redirects","retries","reconnects","acceptRanges","rangeStart","downloaded","Range","acceptEncoding","downloadHasStarted","downloadComplete","reconnect","inc","backoff","min","setTimeout","doDownload","reconnectIfEndedEarly","method","maxReconnects","retryRequest","retryOptions","maxRetries","retryAfter","forwardEvents","ee","events","bind","httpLib","urlObj","path","search","hash","port","protocol","username","auth","password","MinigetError","start","transform","onError","readableEnded","cleanup","removeListener","onRequestClose","onData","onEnd","request","res","statusCode","maxRedirects","location","enc","reverse","fn","pipe","streamDestroy","destroyArgs","abort","destroy","unpipe","clearTimeout","_destroy","Promise","resolve","reject","setEncoding","process","nextTick","super","module","m3u8Parser","Writable","_lastLine","_seq","_nextItemDuration","_nextItemRange","_lastItemRangeEnd","_parseLine","attrs","svalue","range","getTime","_parseAttrList","URI","seq","init","duration","_parseRange","BYTERANGE","encoding","lines","querystring","utils","formatUtils","urlUtils","extras","sig","Cache","BASE_URL","cache","cookieCache","watchPageCache","cver","UnrecoverableError","AGE_RESTRICTED_URLS","getBasicInfo","async","validate","info","playErr","privateErr","privateVideoError","streamingData","isRental","isNotYetBroadcasted","pipeline","getWatchHTMLPage","getWatchJSONPage","getVideoInfoPage","formats","parseFormats","related_videos","getRelatedVideos","media","getMedia","additional","author","getAuthor","likes","getLikes","dislikes","getDislikes","age_restricted","notice_url","some","video_url","storyboards","getStoryboards","chapters","getChapters","videoDetails","cleanVideoDetails","microformat","playerMicroformatRenderer","errorScreen","playerLegacyDesktopYpcOfferRenderer","getWatchHTMLURL","lang","getWatchHTMLPageBody","getOrSet","EMBED_URL","getEmbedPageBody","embedUrl","getHTML5player","html5playerRes","getIdentityToken","throwIfNotFound","page","endpoints","func","newInfo","retryFunc","concat","target","source","entries","undefined","currentTry","wait","jsonClosingChars","parseJSON","varName","json","findJSON","prependJSON","jsonStr","findPlayerResponse","playerResponse","embedded_player_response","getWatchJSONURL","reqOptions","cookie","Cookie","setIdentityToken","jsonUrl","parsedBody","reload","isArray","reduce","part","curr","html5player","player","assets","js","INFO_HOST","INFO_PATH","VIDEO_EURL","adaptiveFormats","getInfo","hasManifest","dashManifestUrl","hlsManifestUrl","funcs","decipherFormats","getDashManifest","getM3U8","results","all","values","map","addFormatMeta","sort","sortFormats","full","adaptationSet","onopentag","node","itag","ID","bitrate","BANDWIDTH","mimeType","MIMETYPE","CODECS","HEIGHT","width","WIDTH","height","fps","FRAMERATE","audioSampleRate","AUDIOSAMPLINGRATE","funcName","vm","getFunctions","html5playerfile","functions","extractFunctions","extractManipulations","caller","functionName","functionStart","ndx","subBody","extractDecipher","functionBody","extractNCode","setDownloadURL","format","decipherScript","nTransformScript","decipher","components","decodeURIComponent","sp","runInNewContext","ncode","cipher","signatureCipher","decipheredFormats","Script","m3u8stream","parseTimestamp","ytdl","downloadFromInfoCallback","chooseFormat","filterFormats","watch","pipeAndSetEvents","prependListener","ondata","dlChunkSize","shouldEnd","isHLS","isDashMPD","chunkReadahead","live_chunk_readahead","begin","isLive","liveBuffer","segment","totalSegments","size","shouldBeChunked","hasAudio","hasVideo","getNextChunk","downloadFromInfo","setImmediate","Map","timeout","tid","delete","unref","entry","clear","sax_1","parse_time_1","DashMPDParser","targetID","lastTag","segmentTemplate","timescale","offset","baseURL","isStatic","treeLevel","periodStart","currtime","timeline","getSegments","gotSegments","tmpl","context","RepresentationID","Time","p1","availabilitystarttime","type","startnumber","presentationtimeoffset","d","repeat","sourceurl","tl","segmentDuration","initialization","itemDuration","render","_vm","_h","$createElement","_c","_self","staticClass","style","top","realTop","opacity","realPercent","realSize","background","realColor","delay","timing","staticRenderFns","props","percent","color","debug","Boolean","computed","realTransition","mounted","realValue","getRealTop","log","val","lastVal","self","$emit","methods","temp","getProgressStyle","reset","locked","component","$event","hoverError","staticStyle","_v","_s","errorText","closeError","progress","checkURL","hasFocus","model","$$v","expression","useCustomDir","updateOutput","outputFolder","audioOnly","videoOnly","hasValidURL","thumbnail","urlErrorMessage","validURL","vidDescription","canDownload","contextualLabelString","hasDownloaded","isDownloading","isComplete","beginDownload","libraries","constructAsCubicBezierString","x1","y1","x2","y2","getLibraryByAuthor","slug","constructLibraryFromAuthor","getAll","assignAll","setCSS","assignLibraryByAuthor","getByName","found","find","getCSS","window","getComputedStyle","document","documentElement","getPropertyValue","setProperty","omodei","snatchContext","settings","useRootDir","setUseRootDir","filepicker","setAudioOnly","setVideoOnly","bestQuality","setBestQuality","realTitle","title","hasNoURL","outputPath","deep","hasError","removeEventListener","createError","contextText","generateJSXText","clearData","channelLink","channelName","miniget_1","m3u8_parser_1","dash_mpd_parser_1","queue_1","supportedParsers","m3u8","playlistURL","Parser","currSegment","streamQueue","segmentNumber","requestQueue","_","refreshThreshold","minRefreshTime","refreshTimeout","lastRefresh","fetchingPlaylist","ended","onQueuedEnd","refreshPlaylist","currPlaylist","lastSeq","starttime","addedItems","addItem","tailedItems","tailedItemsDuration","timedItem","lastItem","ceil","die","5","qualityLabel","audioBitrate","6","13","17","18","22","34","35","36","37","38","43","44","45","46","82","83","84","85","91","92","93","94","95","96","100","101","102","120","127","128","132","133","134","135","136","137","138","139","140","141","151","160","171","172","242","243","244","247","248","249","250","251","264","266","271","272","278","298","299","300","302","303","308","313","315","330","331","332","333","334","335","336","337","qs","TITLE_TO_CATEGORY","song","getText","runs","simpleText","contents","twoColumnWatchNextResults","v","videoSecondaryInfoRenderer","metadataRows","metadataRowContainer","metadataRowContainerRenderer","rows","row","metadataRowRenderer","navigationEndpoint","commandMetadata","webCommandMetadata","category","category_url","richMetadataRowRenderer","boxArt","meta","richMetadataRenderer","year","subtitle","callToAction","endpoint","thumbnails","topic","isVerified","badges","b","metadataBadgeRenderer","tooltip","channelId","subscriberCount","verified","v2","owner","videoOwnerRenderer","browseEndpoint","browseId","subscriberCountText","ownerChannelName","user","ownerProfileUrl","channel_url","external_channel_url","externalChannelId","user_url","subscriber_count","parseRelatedVideo","details","rvsParams","viewCount","viewCountText","shortViewCount","shortViewCountText","rvsDetails","elem","videoId","short_view_count_text","shortBylineText","canonicalBaseUrl","video","published","publishedTimeText","channelThumbnail","ownerBadges","Symbol","toPrimitive","view_count","length_seconds","lengthText","richThumbnails","richThumbnail","movingThumbnailRenderer","movingThumbnailDetails","label","secondaryResults","webWatchNextResponseExtensionData","relatedVideoArgs","videos","compactVideoRenderer","autoplay","compactAutoplayRenderer","itemSectionRenderer","content","videoPrimaryInfoRenderer","buttons","videoActions","menuRenderer","topLevelButtons","like","toggleButtonRenderer","defaultIcon","iconType","defaultText","accessibility","accessibilityData","dislike","description","shortDescription","lengthSeconds","parts","playerStoryboardSpecRenderer","spec","thumbnailWidth","thumbnailHeight","thumbnailCount","columns","interval","nameReplacement","sigh","storyboardCount","templateUrl","playerOverlayRenderer","playerOverlays","playerBar","decoratedPlayerBarRenderer","markersMap","multiMarkersPlayerBarRenderer","marker","chapter","chapterRenderer","start_time","timeRangeStartMillis","FORMATS","audioEncodingRanks","videoEncodingRanks","getVideoBitrate","getVideoEncodingRank","findIndex","codecs","getAudioBitrate","getAudioEncodingRank","sortFormatsBy","sortBy","sortFormatsByVideo","sortFormatsByAudio","fmt","quality","bestAudioFormat","f","worstVideoQuality","bestVideoFormat","worstAudioQuality","getFormatByQuality","getFormat","container","videoCodec","audioCodec"],"mappings":"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","file":"js/chunk-1239b53a.e8b5899e.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Queue = void 0;\nclass Queue {\n    /**\n     * A really simple queue with concurrency.\n     *\n     * @param {Function} worker\n     * @param {Object} options\n     * @param {!number} options.concurrency\n     */\n    constructor(worker, options = {}) {\n        this._worker = worker;\n        this._concurrency = options.concurrency || 1;\n        this.tasks = [];\n        this.total = 0;\n        this.active = 0;\n    }\n    /**\n     * Push a task to the queue.\n     *\n     *  @param {T} item\n     *  @param {!Function} callback\n     */\n    push(item, callback) {\n        this.tasks.push({ item, callback });\n        this.total++;\n        this._next();\n    }\n    /**\n     * Process next job in queue.\n     */\n    _next() {\n        if (this.active >= this._concurrency || !this.tasks.length) {\n            return;\n        }\n        const { item, callback } = this.tasks.shift();\n        let callbackCalled = false;\n        this.active++;\n        this._worker(item, (err, result) => {\n            if (callbackCalled) {\n                return;\n            }\n            this.active--;\n            callbackCalled = true;\n            callback === null || callback === void 0 ? void 0 : callback(err, result);\n            this._next();\n        });\n    }\n    /**\n     * Stops processing queued jobs.\n     */\n    die() {\n        this.tasks = [];\n    }\n}\nexports.Queue = Queue;\n//# sourceMappingURL=queue.js.map","const miniget = require('miniget');\n\n\n/**\n * Extract string inbetween another.\n *\n * @param {string} haystack\n * @param {string} left\n * @param {string} right\n * @returns {string}\n */\nexports.between = (haystack, left, right) => {\n  let pos;\n  if (left instanceof RegExp) {\n    const match = haystack.match(left);\n    if (!match) { return ''; }\n    pos = match.index + match[0].length;\n  } else {\n    pos = haystack.indexOf(left);\n    if (pos === -1) { return ''; }\n    pos += left.length;\n  }\n  haystack = haystack.slice(pos);\n  pos = haystack.indexOf(right);\n  if (pos === -1) { return ''; }\n  haystack = haystack.slice(0, pos);\n  return haystack;\n};\n\n\n/**\n * Get a number from an abbreviated number string.\n *\n * @param {string} string\n * @returns {number}\n */\nexports.parseAbbreviatedNumber = string => {\n  const match = string\n    .replace(',', '.')\n    .replace(' ', '')\n    .match(/([\\d,.]+)([MK]?)/);\n  if (match) {\n    let [, num, multi] = match;\n    num = parseFloat(num);\n    return Math.round(multi === 'M' ? num * 1000000 :\n      multi === 'K' ? num * 1000 : num);\n  }\n  return null;\n};\n\n\n/**\n * Match begin and end braces of input JSON, return only json\n *\n * @param {string} mixedJson\n * @returns {string}\n*/\nexports.cutAfterJSON = mixedJson => {\n  let open, close;\n  if (mixedJson[0] === '[') {\n    open = '[';\n    close = ']';\n  } else if (mixedJson[0] === '{') {\n    open = '{';\n    close = '}';\n  }\n\n  if (!open) {\n    throw new Error(`Can't cut unsupported JSON (need to begin with [ or { ) but got: ${mixedJson[0]}`);\n  }\n\n  // States if the loop is currently in a string\n  let isString = false;\n\n  // States if the current character is treated as escaped or not\n  let isEscaped = false;\n\n  // Current open brackets to be closed\n  let counter = 0;\n\n  let i;\n  for (i = 0; i < mixedJson.length; i++) {\n    // Toggle the isString boolean when leaving/entering string\n    if (mixedJson[i] === '\"' && !isEscaped) {\n      isString = !isString;\n      continue;\n    }\n\n    // Toggle the isEscaped boolean for every backslash\n    // Reset for every regular character\n    isEscaped = mixedJson[i] === '\\\\' && !isEscaped;\n\n    if (isString) continue;\n\n    if (mixedJson[i] === open) {\n      counter++;\n    } else if (mixedJson[i] === close) {\n      counter--;\n    }\n\n    // All brackets have been closed, thus end of JSON is reached\n    if (counter === 0) {\n      // Return the cut JSON\n      return mixedJson.substr(0, i + 1);\n    }\n  }\n\n  // We ran through the whole string and ended up with an unclosed bracket\n  throw Error(\"Can't cut unsupported JSON (no matching closing bracket found)\");\n};\n\n\n/**\n * Checks if there is a playability error.\n *\n * @param {Object} player_response\n * @param {Array.<string>} statuses\n * @param {Error} ErrorType\n * @returns {!Error}\n */\nexports.playError = (player_response, statuses, ErrorType = Error) => {\n  let playability = player_response && player_response.playabilityStatus;\n  if (playability && statuses.includes(playability.status)) {\n    return new ErrorType(playability.reason || (playability.messages && playability.messages[0]));\n  }\n  return null;\n};\n\n/**\n * Does a miniget request and calls options.requestCallback if present\n *\n * @param {string} url the request url\n * @param {Object} options an object with optional requestOptions and requestCallback parameters\n * @param {Object} requestOptionsOverwrite overwrite of options.requestOptions\n * @returns {miniget.Stream}\n */\nexports.exposedMiniget = (url, options = {}, requestOptionsOverwrite) => {\n  const req = miniget(url, requestOptionsOverwrite || options.requestOptions);\n  if (typeof options.requestCallback === 'function') options.requestCallback(req);\n  return req;\n};\n\n/**\n * Temporary helper to help deprecating a few properties.\n *\n * @param {Object} obj\n * @param {string} prop\n * @param {Object} value\n * @param {string} oldPath\n * @param {string} newPath\n */\nexports.deprecate = (obj, prop, value, oldPath, newPath) => {\n  Object.defineProperty(obj, prop, {\n    get: () => {\n      console.warn(`\\`${oldPath}\\` will be removed in a near future release, ` +\n        `use \\`${newPath}\\` instead.`);\n      return value;\n    },\n  });\n};\n\n\n// Check for updates.\nconst pkg = require('../package.json');\nconst UPDATE_INTERVAL = 1000 * 60 * 60 * 12;\nexports.lastUpdateCheck = 0;\nexports.checkForUpdates = () => {\n  if (!process.env.YTDL_NO_UPDATE && !pkg.version.startsWith('0.0.0-') &&\n    Date.now() - exports.lastUpdateCheck >= UPDATE_INTERVAL) {\n    exports.lastUpdateCheck = Date.now();\n    return miniget('https://api.github.com/repos/fent/node-ytdl-core/releases/latest', {\n      headers: { 'User-Agent': 'ytdl-core' },\n    }).text().then(response => {\n      if (JSON.parse(response).tag_name !== `v${pkg.version}`) {\n        console.warn('\\x1b[33mWARNING:\\x1B[0m ytdl-core is out of date! Update with \"npm install ytdl-core@latest\".');\n      }\n    }, err => {\n      console.warn('Error checking for updates:', err.message);\n      console.warn('You can disable this check by setting the `YTDL_NO_UPDATE` env variable.');\n    });\n  }\n  return null;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.durationStr = exports.humanStr = void 0;\nconst numberFormat = /^\\d+$/;\nconst timeFormat = /^(?:(?:(\\d+):)?(\\d{1,2}):)?(\\d{1,2})(?:\\.(\\d{3}))?$/;\nconst timeUnits = {\n    ms: 1,\n    s: 1000,\n    m: 60000,\n    h: 3600000,\n};\n/**\n * Converts human friendly time to milliseconds. Supports the format\n * 00:00:00.000 for hours, minutes, seconds, and milliseconds respectively.\n * And 0ms, 0s, 0m, 0h, and together 1m1s.\n *\n * @param {number|string} time\n * @returns {number}\n */\nexports.humanStr = (time) => {\n    if (typeof time === 'number') {\n        return time;\n    }\n    if (numberFormat.test(time)) {\n        return +time;\n    }\n    const firstFormat = timeFormat.exec(time);\n    if (firstFormat) {\n        return (+(firstFormat[1] || 0) * timeUnits.h) +\n            (+(firstFormat[2] || 0) * timeUnits.m) +\n            (+firstFormat[3] * timeUnits.s) +\n            +(firstFormat[4] || 0);\n    }\n    else {\n        let total = 0;\n        const r = /(-?\\d+)(ms|s|m|h)/g;\n        let rs;\n        while ((rs = r.exec(time)) !== null) {\n            total += +rs[1] * timeUnits[rs[2]];\n        }\n        return total;\n    }\n};\n/**\n * Parses a duration string in the form of \"123.456S\", returns milliseconds.\n *\n * @param {string} time\n * @returns {number}\n */\nexports.durationStr = (time) => {\n    let total = 0;\n    const r = /(\\d+(?:\\.\\d+)?)(S|M|H)/g;\n    let rs;\n    while ((rs = r.exec(time)) !== null) {\n        total += +rs[1] * timeUnits[rs[2].toLowerCase()];\n    }\n    return total;\n};\n//# sourceMappingURL=parse-time.js.map","/**\n * Get video ID.\n *\n * There are a few type of video URL formats.\n *  - https://www.youtube.com/watch?v=VIDEO_ID\n *  - https://m.youtube.com/watch?v=VIDEO_ID\n *  - https://youtu.be/VIDEO_ID\n *  - https://www.youtube.com/v/VIDEO_ID\n *  - https://www.youtube.com/embed/VIDEO_ID\n *  - https://music.youtube.com/watch?v=VIDEO_ID\n *  - https://gaming.youtube.com/watch?v=VIDEO_ID\n *\n * @param {string} link\n * @return {string}\n * @throws {Error} If unable to find a id\n * @throws {TypeError} If videoid doesn't match specs\n */\nconst validQueryDomains = new Set([\n  'youtube.com',\n  'www.youtube.com',\n  'm.youtube.com',\n  'music.youtube.com',\n  'gaming.youtube.com',\n]);\nconst validPathDomains = /^https?:\\/\\/(youtu\\.be\\/|(www\\.)?youtube\\.com\\/(embed|v|shorts)\\/)/;\nexports.getURLVideoID = link => {\n  const parsed = new URL(link);\n  let id = parsed.searchParams.get('v');\n  if (validPathDomains.test(link) && !id) {\n    const paths = parsed.pathname.split('/');\n    id = parsed.host === 'youtu.be' ? paths[1] : paths[2];\n  } else if (parsed.hostname && !validQueryDomains.has(parsed.hostname)) {\n    throw Error('Not a YouTube domain');\n  }\n  if (!id) {\n    throw Error(`No video id found: ${link}`);\n  }\n  id = id.substring(0, 11);\n  if (!exports.validateID(id)) {\n    throw TypeError(`Video id (${id}) does not match expected ` +\n      `format (${idRegex.toString()})`);\n  }\n  return id;\n};\n\n\n/**\n * Gets video ID either from a url or by checking if the given string\n * matches the video ID format.\n *\n * @param {string} str\n * @returns {string}\n * @throws {Error} If unable to find a id\n * @throws {TypeError} If videoid doesn't match specs\n */\nconst urlRegex = /^https?:\\/\\//;\nexports.getVideoID = str => {\n  if (exports.validateID(str)) {\n    return str;\n  } else if (urlRegex.test(str)) {\n    return exports.getURLVideoID(str);\n  } else {\n    throw Error(`No video id found: ${str}`);\n  }\n};\n\n\n/**\n * Returns true if given id satifies YouTube's id format.\n *\n * @param {string} id\n * @return {boolean}\n */\nconst idRegex = /^[a-zA-Z0-9-_]{11}$/;\nexports.validateID = id => idRegex.test(id);\n\n\n/**\n * Checks wether the input string includes a valid id.\n *\n * @param {string} string\n * @returns {boolean}\n */\nexports.validateURL = string => {\n  try {\n    exports.getURLVideoID(string);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n",";(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\n  sax.SAXParser = SAXParser\n  sax.SAXStream = SAXStream\n  sax.createStream = createStream\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ]\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ]\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this\n    clearBuffers(parser)\n    parser.q = parser.c = ''\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n    parser.opt = opt || {}\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\n    parser.tags = []\n    parser.closed = parser.closedRoot = parser.sawRoot = false\n    parser.tag = parser.error = null\n    parser.strict = !!strict\n    parser.noscript = !!(strict || parser.opt.noscript)\n    parser.state = S.BEGIN\n    parser.strictEntities = parser.opt.strictEntities\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n    parser.attribList = []\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS)\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0\n    }\n    emit(parser, 'onready')\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o\n      var newf = new F()\n      return newf\n    }\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = []\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n      return a\n    }\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    var maxActual = 0\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser)\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata)\n            parser.cdata = ''\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script)\n            parser.script = ''\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\n        }\n      }\n      maxActual = Math.max(maxActual, len)\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\n    parser.bufferCheckPosition = m + parser.position\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = ''\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser)\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata)\n      parser.cdata = ''\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this) },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this) }\n  }\n\n  var Stream\n  try {\n    Stream = require('stream').Stream\n  } catch (ex) {\n    Stream = function () {}\n  }\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  })\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this)\n\n    this._parser = new SAXParser(strict, opt)\n    this.writable = true\n    this.readable = true\n\n    var me = this\n\n    this._parser.onend = function () {\n      me.emit('end')\n    }\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er)\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null\n    }\n\n    this._decoder = null\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev)\n            me._parser['on' + ev] = h\n            return h\n          }\n          me.on(ev, h)\n        },\n        enumerable: true,\n        configurable: false\n      })\n    })\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  })\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require('string_decoder').StringDecoder\n        this._decoder = new SD('utf8')\n      }\n      data = this._decoder.write(data)\n    }\n\n    this._parser.write(data.toString())\n    this.emit('data', data)\n    return true\n  }\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk)\n    }\n    this._parser.end()\n    return true\n  }\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\n        args.splice(0, 0, ev)\n        me.emit.apply(me, args)\n      }\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  }\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var CDATA = '[CDATA['\n  var DOCTYPE = 'DOCTYPE'\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  function isWhitespace (c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t'\n  }\n\n  function isQuote (c) {\n    return c === '\"' || c === '\\''\n  }\n\n  function isAttribEnd (c) {\n    return c === '>' || isWhitespace(c)\n  }\n\n  function isMatch (regex, c) {\n    return regex.test(c)\n  }\n\n  function notMatch (regex, c) {\n    return !isMatch(regex, c)\n  }\n\n  var S = 0\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  }\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  }\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  }\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n  })\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s\n  }\n\n  // shorthand\n  S = sax.STATE\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data)\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser)\n    emit(parser, nodeType, data)\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode)\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\n    parser.textNode = ''\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim()\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser)\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c\n    }\n    er = new Error(er)\n    parser.error = er\n    emit(parser, 'onerror', er)\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end')\n    }\n    closeText(parser)\n    parser.c = ''\n    parser.closed = true\n    emit(parser, 'onend')\n    SAXParser.call(parser, parser.strict, parser.opt)\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message)\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns\n    }\n    parser.attribList.length = 0\n    emitNode(parser, 'onopentagstart', tag)\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':')\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\n    var prefix = qualName[0]\n    var local = qualName[1]\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns'\n      local = ''\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]()\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = ''\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true)\n      var prefix = qn.prefix\n      var local = qn.local\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else {\n          var tag = parser.tag\n          var parent = parser.tags[parser.tags.length - 1] || parser\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns)\n          }\n          tag.ns[local] = parser.attribValue\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue])\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      })\n    }\n\n    parser.attribName = parser.attribValue = ''\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName)\n      tag.prefix = qn.prefix\n      tag.local = qn.local\n      tag.uri = tag.ns[qn.prefix] || ''\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName))\n        tag.uri = qn.prefix\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          })\n        })\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i]\n        var name = nv[0]\n        var value = nv[1]\n        var qualName = qname(name, true)\n        var prefix = qualName.prefix\n        var local = qualName.local\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        }\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix))\n          a.uri = prefix\n        }\n        parser.tag.attributes[name] = a\n        emitNode(parser, 'onattribute', a)\n      }\n      parser.attribList.length = 0\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing\n\n    // process the tag\n    parser.sawRoot = true\n    parser.tags.push(parser.tag)\n    emitNode(parser, 'onopentag', parser.tag)\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT\n      } else {\n        parser.state = S.TEXT\n      }\n      parser.tag = null\n      parser.tagName = ''\n    }\n    parser.attribName = parser.attribValue = ''\n    parser.attribList.length = 0\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.')\n      parser.textNode += '</>'\n      parser.state = S.TEXT\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>'\n        parser.tagName = ''\n        parser.state = S.SCRIPT\n        return\n      }\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length\n    var tagName = parser.tagName\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]()\n    }\n    var closeTo = tagName\n    while (t--) {\n      var close = parser.tags[t]\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag')\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\n      parser.textNode += '</' + parser.tagName + '>'\n      parser.state = S.TEXT\n      return\n    }\n    parser.tagName = tagName\n    var s = parser.tags.length\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop()\n      parser.tagName = parser.tag.name\n      emitNode(parser, 'onclosetag', parser.tagName)\n\n      var x = {}\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i]\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p]\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\n        })\n      }\n    }\n    if (t === 0) parser.closedRoot = true\n    parser.tagName = parser.attribValue = parser.attribName = ''\n    parser.attribList.length = 0\n    parser.state = S.TEXT\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity\n    var entityLC = entity.toLowerCase()\n    var num\n    var numStr = ''\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2)\n        num = parseInt(entity, 16)\n        numStr = num.toString(16)\n      } else {\n        entity = entity.slice(1)\n        num = parseInt(entity, 10)\n        numStr = num.toString(10)\n      }\n    }\n    entity = entity.replace(/^0+/, '')\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity')\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA\n      parser.startTagPosition = parser.position\n    } else if (!isWhitespace(c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.')\n      parser.textNode = c\n      parser.state = S.TEXT\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = ''\n    if (i < chunk.length) {\n      result = chunk.charAt(i)\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString()\n    }\n    var i = 0\n    var c = ''\n    while (true) {\n      c = charAt(chunk, i++)\n      parser.c = c\n\n      if (!c) {\n        break\n      }\n\n      if (parser.trackPosition) {\n        parser.position++\n        if (c === '\\n') {\n          parser.line++\n          parser.column = 0\n        } else {\n          parser.column++\n        }\n      }\n\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++)\n              if (c && parser.trackPosition) {\n                parser.position++\n                if (c === '\\n') {\n                  parser.line++\n                  parser.column = 0\n                } else {\n                  parser.column++\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1)\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else {\n            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.')\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY\n            } else {\n              parser.textNode += c\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING\n          } else {\n            parser.script += c\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG\n          } else {\n            parser.script += '<' + c\n            parser.state = S.SCRIPT\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL\n            parser.sgmlDecl = ''\n          } else if (isWhitespace(c)) {\n            // wait for it...\n          } else if (isMatch(nameStart, c)) {\n            parser.state = S.OPEN_TAG\n            parser.tagName = c\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG\n            parser.tagName = ''\n          } else if (c === '?') {\n            parser.state = S.PROC_INST\n            parser.procInstName = parser.procInstBody = ''\n          } else {\n            strictFail(parser, 'Unencoded <')\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition\n              c = new Array(pad).join(' ') + c\n            }\n            parser.textNode += '<' + c\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata')\n            parser.state = S.CDATA\n            parser.sgmlDecl = ''\n            parser.cdata = ''\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT\n            parser.comment = ''\n            parser.sgmlDecl = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration')\n            }\n            parser.doctype = ''\n            parser.sgmlDecl = ''\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\n            parser.sgmlDecl = ''\n            parser.state = S.TEXT\n          } else if (isQuote(c)) {\n            parser.state = S.SGML_DECL_QUOTED\n            parser.sgmlDecl += c\n          } else {\n            parser.sgmlDecl += c\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL\n            parser.q = ''\n          }\n          parser.sgmlDecl += c\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT\n            emitNode(parser, 'ondoctype', parser.doctype)\n            parser.doctype = true // just remember that we saw it.\n          } else {\n            parser.doctype += c\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD\n            } else if (isQuote(c)) {\n              parser.state = S.DOCTYPE_QUOTED\n              parser.q = c\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.q = ''\n            parser.state = S.DOCTYPE\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c\n          if (c === ']') {\n            parser.state = S.DOCTYPE\n          } else if (isQuote(c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED\n            parser.q = c\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD\n            parser.q = ''\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING\n          } else {\n            parser.comment += c\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED\n            parser.comment = textopts(parser.opt, parser.comment)\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment)\n            }\n            parser.comment = ''\n          } else {\n            parser.comment += '-' + c\n            parser.state = S.COMMENT\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment')\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c\n            parser.state = S.COMMENT\n          } else {\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING\n          } else {\n            parser.cdata += c\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2\n          } else {\n            parser.cdata += ']' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata)\n            }\n            emitNode(parser, 'onclosecdata')\n            parser.cdata = ''\n            parser.state = S.TEXT\n          } else if (c === ']') {\n            parser.cdata += ']'\n          } else {\n            parser.cdata += ']]' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else if (isWhitespace(c)) {\n            parser.state = S.PROC_INST_BODY\n          } else {\n            parser.procInstName += c\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && isWhitespace(c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else {\n            parser.procInstBody += c\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            })\n            parser.procInstName = parser.procInstBody = ''\n            parser.state = S.TEXT\n          } else {\n            parser.procInstBody += '?' + c\n            parser.state = S.PROC_INST_BODY\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else {\n            newTag(parser)\n            if (c === '>') {\n              openTag(parser)\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH\n            } else {\n              if (!isWhitespace(c)) {\n                strictFail(parser, 'Invalid character in tag name')\n              }\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true)\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (isWhitespace(c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value')\n            parser.attribValue = parser.attribName\n            attrib(parser)\n            openTag(parser)\n          } else if (isWhitespace(c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\n          } else if (isMatch(nameBody, c)) {\n            parser.attribName += c\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (isWhitespace(c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value')\n            parser.tag.attributes[parser.attribName] = ''\n            parser.attribValue = ''\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            })\n            parser.attribName = ''\n            if (c === '>') {\n              openTag(parser)\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c\n              parser.state = S.ATTRIB_NAME\n            } else {\n              strictFail(parser, 'Invalid attribute name')\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (isWhitespace(c)) {\n            continue\n          } else if (isQuote(c)) {\n            parser.q = c\n            parser.state = S.ATTRIB_VALUE_QUOTED\n          } else {\n            strictFail(parser, 'Unquoted attribute value')\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\n            parser.attribValue = c\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          parser.q = ''\n          parser.state = S.ATTRIB_VALUE_CLOSED\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (isWhitespace(c)) {\n            parser.state = S.ATTRIB\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes')\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (!isAttribEnd(c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          if (c === '>') {\n            openTag(parser)\n          } else {\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (isWhitespace(c)) {\n              continue\n            } else if (notMatch(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c\n                parser.state = S.SCRIPT\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.')\n              }\n            } else {\n              parser.tagName = c\n            }\n          } else if (c === '>') {\n            closeTag(parser)\n          } else if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName\n            parser.tagName = ''\n            parser.state = S.SCRIPT\n          } else {\n            if (!isWhitespace(c)) {\n              strictFail(parser, 'Invalid tagname in closing tag')\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (isWhitespace(c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag')\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState\n          var buffer\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT\n              buffer = 'textNode'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED\n              buffer = 'attribValue'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED\n              buffer = 'attribValue'\n              break\n          }\n\n          if (c === ';') {\n            parser[buffer] += parseEntity(parser)\n            parser.entity = ''\n            parser.state = returnState\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c\n          } else {\n            strictFail(parser, 'Invalid character in entity name')\n            parser[buffer] += '&' + parser.entity + c\n            parser.entity = ''\n            parser.state = returnState\n          }\n\n          continue\n\n        default:\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser)\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  /* istanbul ignore next */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode\n      var floor = Math.floor\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000\n        var codeUnits = []\n        var highSurrogate\n        var lowSurrogate\n        var index = -1\n        var length = arguments.length\n        if (!length) {\n          return ''\n        }\n        var result = ''\n        while (++index < length) {\n          var codePoint = Number(arguments[index])\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint)\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000\n            highSurrogate = (codePoint >> 10) + 0xD800\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\n            codeUnits.push(highSurrogate, lowSurrogate)\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits)\n            codeUnits.length = 0\n          }\n        }\n        return result\n      }\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        })\n      } else {\n        String.fromCodePoint = fromCodePoint\n      }\n    }())\n  }\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nconst http_1 = __importDefault(require(\"http\"));\nconst https_1 = __importDefault(require(\"https\"));\nconst stream_1 = require(\"stream\");\nconst httpLibs = { 'http:': http_1.default, 'https:': https_1.default };\nconst redirectStatusCodes = new Set([301, 302, 303, 307, 308]);\nconst retryStatusCodes = new Set([429, 503]);\n// `request`, `response`, `abort`, left out, miniget will emit these.\nconst requestEvents = ['connect', 'continue', 'information', 'socket', 'timeout', 'upgrade'];\nconst responseEvents = ['aborted'];\nMiniget.MinigetError = class MinigetError extends Error {\n    constructor(message, statusCode) {\n        super(message);\n        this.statusCode = statusCode;\n    }\n};\nMiniget.defaultOptions = {\n    maxRedirects: 10,\n    maxRetries: 2,\n    maxReconnects: 0,\n    backoff: { inc: 100, max: 10000 },\n};\nfunction Miniget(url, options = {}) {\n    var _a;\n    const opts = Object.assign({}, Miniget.defaultOptions, options);\n    const stream = new stream_1.PassThrough({ highWaterMark: opts.highWaterMark });\n    stream.destroyed = stream.aborted = false;\n    let activeRequest;\n    let activeResponse;\n    let activeDecodedStream;\n    let redirects = 0;\n    let retries = 0;\n    let retryTimeout;\n    let reconnects = 0;\n    let contentLength;\n    let acceptRanges = false;\n    let rangeStart = 0, rangeEnd;\n    let downloaded = 0;\n    // Check if this is a ranged request.\n    if ((_a = opts.headers) === null || _a === void 0 ? void 0 : _a.Range) {\n        let r = /bytes=(\\d+)-(\\d+)?/.exec(`${opts.headers.Range}`);\n        if (r) {\n            rangeStart = parseInt(r[1], 10);\n            rangeEnd = parseInt(r[2], 10);\n        }\n    }\n    // Add `Accept-Encoding` header.\n    if (opts.acceptEncoding) {\n        opts.headers = Object.assign({\n            'Accept-Encoding': Object.keys(opts.acceptEncoding).join(', '),\n        }, opts.headers);\n    }\n    const downloadHasStarted = () => activeDecodedStream && downloaded > 0;\n    const downloadComplete = () => !acceptRanges || downloaded === contentLength;\n    const reconnect = (err) => {\n        activeDecodedStream = null;\n        retries = 0;\n        let inc = opts.backoff.inc;\n        let ms = Math.min(inc, opts.backoff.max);\n        retryTimeout = setTimeout(doDownload, ms);\n        stream.emit('reconnect', reconnects, err);\n    };\n    const reconnectIfEndedEarly = (err) => {\n        if (options.method !== 'HEAD' && !downloadComplete() && reconnects++ < opts.maxReconnects) {\n            reconnect(err);\n            return true;\n        }\n        return false;\n    };\n    const retryRequest = (retryOptions) => {\n        if (stream.destroyed) {\n            return false;\n        }\n        if (downloadHasStarted()) {\n            return reconnectIfEndedEarly(retryOptions.err);\n        }\n        else if ((!retryOptions.err || retryOptions.err.message === 'ENOTFOUND') &&\n            retries++ < opts.maxRetries) {\n            let ms = retryOptions.retryAfter ||\n                Math.min(retries * opts.backoff.inc, opts.backoff.max);\n            retryTimeout = setTimeout(doDownload, ms);\n            stream.emit('retry', retries, retryOptions.err);\n            return true;\n        }\n        return false;\n    };\n    const forwardEvents = (ee, events) => {\n        for (let event of events) {\n            ee.on(event, stream.emit.bind(stream, event));\n        }\n    };\n    const doDownload = () => {\n        let parsed = {}, httpLib;\n        try {\n            let urlObj = typeof url === 'string' ? new URL(url) : url;\n            parsed = Object.assign({}, {\n                host: urlObj.host,\n                hostname: urlObj.hostname,\n                path: urlObj.pathname + urlObj.search + urlObj.hash,\n                port: urlObj.port,\n                protocol: urlObj.protocol,\n            });\n            if (urlObj.username) {\n                parsed.auth = `${urlObj.username}:${urlObj.password}`;\n            }\n            httpLib = httpLibs[String(parsed.protocol)];\n        }\n        catch (err) {\n            // Let the error be caught by the if statement below.\n        }\n        if (!httpLib) {\n            stream.emit('error', new Miniget.MinigetError(`Invalid URL: ${url}`));\n            return;\n        }\n        Object.assign(parsed, opts);\n        if (acceptRanges && downloaded > 0) {\n            let start = downloaded + rangeStart;\n            let end = rangeEnd || '';\n            parsed.headers = Object.assign({}, parsed.headers, {\n                Range: `bytes=${start}-${end}`,\n            });\n        }\n        if (opts.transform) {\n            try {\n                parsed = opts.transform(parsed);\n            }\n            catch (err) {\n                stream.emit('error', err);\n                return;\n            }\n            if (!parsed || parsed.protocol) {\n                httpLib = httpLibs[String(parsed === null || parsed === void 0 ? void 0 : parsed.protocol)];\n                if (!httpLib) {\n                    stream.emit('error', new Miniget.MinigetError('Invalid URL object from `transform` function'));\n                    return;\n                }\n            }\n        }\n        const onError = (err) => {\n            if (stream.destroyed || stream.readableEnded) {\n                return;\n            }\n            cleanup();\n            if (!retryRequest({ err })) {\n                stream.emit('error', err);\n            }\n            else {\n                activeRequest.removeListener('close', onRequestClose);\n            }\n        };\n        const onRequestClose = () => {\n            cleanup();\n            retryRequest({});\n        };\n        const cleanup = () => {\n            activeRequest.removeListener('close', onRequestClose);\n            activeResponse === null || activeResponse === void 0 ? void 0 : activeResponse.removeListener('data', onData);\n            activeDecodedStream === null || activeDecodedStream === void 0 ? void 0 : activeDecodedStream.removeListener('end', onEnd);\n        };\n        const onData = (chunk) => { downloaded += chunk.length; };\n        const onEnd = () => {\n            cleanup();\n            if (!reconnectIfEndedEarly()) {\n                stream.end();\n            }\n        };\n        activeRequest = httpLib.request(parsed, (res) => {\n            // Needed for node v10, v12.\n            // istanbul ignore next\n            if (stream.destroyed) {\n                return;\n            }\n            if (redirectStatusCodes.has(res.statusCode)) {\n                if (redirects++ >= opts.maxRedirects) {\n                    stream.emit('error', new Miniget.MinigetError('Too many redirects'));\n                }\n                else {\n                    if (res.headers.location) {\n                        url = res.headers.location;\n                    }\n                    else {\n                        let err = new Miniget.MinigetError('Redirect status code given with no location', res.statusCode);\n                        stream.emit('error', err);\n                        cleanup();\n                        return;\n                    }\n                    setTimeout(doDownload, parseInt(res.headers['retry-after'] || '0', 10) * 1000);\n                    stream.emit('redirect', url);\n                }\n                cleanup();\n                return;\n                // Check for rate limiting.\n            }\n            else if (retryStatusCodes.has(res.statusCode)) {\n                if (!retryRequest({ retryAfter: parseInt(res.headers['retry-after'] || '0', 10) })) {\n                    let err = new Miniget.MinigetError(`Status code: ${res.statusCode}`, res.statusCode);\n                    stream.emit('error', err);\n                }\n                cleanup();\n                return;\n            }\n            else if (res.statusCode && (res.statusCode < 200 || res.statusCode >= 400)) {\n                let err = new Miniget.MinigetError(`Status code: ${res.statusCode}`, res.statusCode);\n                if (res.statusCode >= 500) {\n                    onError(err);\n                }\n                else {\n                    stream.emit('error', err);\n                }\n                cleanup();\n                return;\n            }\n            activeDecodedStream = res;\n            if (opts.acceptEncoding && res.headers['content-encoding']) {\n                for (let enc of res.headers['content-encoding'].split(', ').reverse()) {\n                    let fn = opts.acceptEncoding[enc];\n                    if (fn) {\n                        activeDecodedStream = activeDecodedStream.pipe(fn());\n                        activeDecodedStream.on('error', onError);\n                    }\n                }\n            }\n            if (!contentLength) {\n                contentLength = parseInt(`${res.headers['content-length']}`, 10);\n                acceptRanges = res.headers['accept-ranges'] === 'bytes' &&\n                    contentLength > 0 && opts.maxReconnects > 0;\n            }\n            res.on('data', onData);\n            activeDecodedStream.on('end', onEnd);\n            activeDecodedStream.pipe(stream, { end: !acceptRanges });\n            activeResponse = res;\n            stream.emit('response', res);\n            res.on('error', onError);\n            forwardEvents(res, responseEvents);\n        });\n        activeRequest.on('error', onError);\n        activeRequest.on('close', onRequestClose);\n        forwardEvents(activeRequest, requestEvents);\n        if (stream.destroyed) {\n            streamDestroy(...destroyArgs);\n        }\n        stream.emit('request', activeRequest);\n        activeRequest.end();\n    };\n    stream.abort = (err) => {\n        console.warn('`MinigetStream#abort()` has been deprecated in favor of `MinigetStream#destroy()`');\n        stream.aborted = true;\n        stream.emit('abort');\n        stream.destroy(err);\n    };\n    let destroyArgs;\n    const streamDestroy = (err) => {\n        activeRequest.destroy(err);\n        activeDecodedStream === null || activeDecodedStream === void 0 ? void 0 : activeDecodedStream.unpipe(stream);\n        activeDecodedStream === null || activeDecodedStream === void 0 ? void 0 : activeDecodedStream.destroy();\n        clearTimeout(retryTimeout);\n    };\n    stream._destroy = (...args) => {\n        stream.destroyed = true;\n        if (activeRequest) {\n            streamDestroy(...args);\n        }\n        else {\n            destroyArgs = args;\n        }\n    };\n    stream.text = () => new Promise((resolve, reject) => {\n        let body = '';\n        stream.setEncoding('utf8');\n        stream.on('data', chunk => body += chunk);\n        stream.on('end', () => resolve(body));\n        stream.on('error', reject);\n    });\n    process.nextTick(doDownload);\n    return stream;\n}\nmodule.exports = Miniget;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst stream_1 = require(\"stream\");\n/**\n * A very simple m3u8 playlist file parser that detects tags and segments.\n */\nclass m3u8Parser extends stream_1.Writable {\n    constructor() {\n        super();\n        this._lastLine = '';\n        this._seq = 0;\n        this._nextItemDuration = null;\n        this._nextItemRange = null;\n        this._lastItemRangeEnd = 0;\n        this.on('finish', () => {\n            this._parseLine(this._lastLine);\n            this.emit('end');\n        });\n    }\n    _parseAttrList(value) {\n        let attrs = {};\n        let regex = /([A-Z0-9-]+)=(?:\"([^\"]*?)\"|([^,]*?))/g;\n        let match;\n        while ((match = regex.exec(value)) !== null) {\n            attrs[match[1]] = match[2] || match[3];\n        }\n        return attrs;\n    }\n    _parseRange(value) {\n        if (!value)\n            return null;\n        let svalue = value.split('@');\n        let start = svalue[1] ? parseInt(svalue[1]) : this._lastItemRangeEnd + 1;\n        let end = start + parseInt(svalue[0]) - 1;\n        let range = { start, end };\n        this._lastItemRangeEnd = range.end;\n        return range;\n    }\n    _parseLine(line) {\n        let match = line.match(/^#(EXT[A-Z0-9-]+)(?::(.*))?/);\n        if (match) {\n            // This is a tag.\n            const tag = match[1];\n            const value = match[2] || '';\n            switch (tag) {\n                case 'EXT-X-PROGRAM-DATE-TIME':\n                    this.emit('starttime', new Date(value).getTime());\n                    break;\n                case 'EXT-X-MEDIA-SEQUENCE':\n                    this._seq = parseInt(value);\n                    break;\n                case 'EXT-X-MAP': {\n                    let attrs = this._parseAttrList(value);\n                    if (!attrs.URI) {\n                        this.destroy(new Error('`EXT-X-MAP` found without required attribute `URI`'));\n                        return;\n                    }\n                    this.emit('item', {\n                        url: attrs.URI,\n                        seq: this._seq,\n                        init: true,\n                        duration: 0,\n                        range: this._parseRange(attrs.BYTERANGE),\n                    });\n                    break;\n                }\n                case 'EXT-X-BYTERANGE': {\n                    this._nextItemRange = this._parseRange(value);\n                    break;\n                }\n                case 'EXTINF':\n                    this._nextItemDuration =\n                        Math.round(parseFloat(value.split(',')[0]) * 1000);\n                    break;\n                case 'EXT-X-ENDLIST':\n                    this.emit('endlist');\n                    break;\n            }\n        }\n        else if (!/^#/.test(line) && line.trim()) {\n            // This is a segment\n            this.emit('item', {\n                url: line.trim(),\n                seq: this._seq++,\n                duration: this._nextItemDuration,\n                range: this._nextItemRange,\n            });\n            this._nextItemRange = null;\n        }\n    }\n    _write(chunk, encoding, callback) {\n        let lines = chunk.toString('utf8').split('\\n');\n        if (this._lastLine) {\n            lines[0] = this._lastLine + lines[0];\n        }\n        lines.forEach((line, i) => {\n            if (this.destroyed)\n                return;\n            if (i < lines.length - 1) {\n                this._parseLine(line);\n            }\n            else {\n                // Save the last line in case it has been broken up.\n                this._lastLine = line;\n            }\n        });\n        callback();\n    }\n}\nexports.default = m3u8Parser;\n//# sourceMappingURL=m3u8-parser.js.map","const querystring = require('querystring');\nconst sax = require('sax');\nconst miniget = require('miniget');\nconst utils = require('./utils');\n// Forces Node JS version of setTimeout for Electron based applications\nconst { setTimeout } = require('timers');\nconst formatUtils = require('./format-utils');\nconst urlUtils = require('./url-utils');\nconst extras = require('./info-extras');\nconst sig = require('./sig');\nconst Cache = require('./cache');\n\n\nconst BASE_URL = 'https://www.youtube.com/watch?v=';\n\n\n// Cached for storing basic/full info.\nexports.cache = new Cache();\nexports.cookieCache = new Cache(1000 * 60 * 60 * 24);\nexports.watchPageCache = new Cache();\n// Cache for cver used in getVideoInfoPage\nlet cver = '2.20210622.10.00';\n\n\n// Special error class used to determine if an error is unrecoverable,\n// as in, ytdl-core should not try again to fetch the video metadata.\n// In this case, the video is usually unavailable in some way.\nclass UnrecoverableError extends Error {}\n\n\n// List of URLs that show up in `notice_url` for age restricted videos.\nconst AGE_RESTRICTED_URLS = [\n  'support.google.com/youtube/?p=age_restrictions',\n  'youtube.com/t/community_guidelines',\n];\n\n\n/**\n * Gets info from a video without getting additional formats.\n *\n * @param {string} id\n * @param {Object} options\n * @returns {Promise<Object>}\n*/\nexports.getBasicInfo = async(id, options) => {\n  const retryOptions = Object.assign({}, miniget.defaultOptions, options.requestOptions);\n  options.requestOptions = Object.assign({}, options.requestOptions, {});\n  options.requestOptions.headers = Object.assign({},\n    {\n      // eslint-disable-next-line max-len\n      'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.101 Safari/537.36',\n    }, options.requestOptions.headers);\n  const validate = info => {\n    let playErr = utils.playError(info.player_response, ['ERROR'], UnrecoverableError);\n    let privateErr = privateVideoError(info.player_response);\n    if (playErr || privateErr) {\n      throw playErr || privateErr;\n    }\n    return info && info.player_response && (\n      info.player_response.streamingData || isRental(info.player_response) || isNotYetBroadcasted(info.player_response)\n    );\n  };\n  let info = await pipeline([id, options], validate, retryOptions, [\n    getWatchHTMLPage,\n    getWatchJSONPage,\n    getVideoInfoPage,\n  ]);\n\n  Object.assign(info, {\n    formats: parseFormats(info.player_response),\n    related_videos: extras.getRelatedVideos(info),\n  });\n\n  // Add additional properties to info.\n  const media = extras.getMedia(info);\n  const additional = {\n    author: extras.getAuthor(info),\n    media,\n    likes: extras.getLikes(info),\n    dislikes: extras.getDislikes(info),\n    age_restricted: !!(media && media.notice_url && AGE_RESTRICTED_URLS.some(url => media.notice_url.includes(url))),\n\n    // Give the standard link to the video.\n    video_url: BASE_URL + id,\n    storyboards: extras.getStoryboards(info),\n    chapters: extras.getChapters(info),\n  };\n\n  info.videoDetails = extras.cleanVideoDetails(Object.assign({},\n    info.player_response && info.player_response.microformat &&\n    info.player_response.microformat.playerMicroformatRenderer,\n    info.player_response && info.player_response.videoDetails, additional), info);\n\n  return info;\n};\n\nconst privateVideoError = player_response => {\n  let playability = player_response && player_response.playabilityStatus;\n  if (playability && playability.status === 'LOGIN_REQUIRED' && playability.messages &&\n    playability.messages.filter(m => /This is a private video/.test(m)).length) {\n    return new UnrecoverableError(playability.reason || (playability.messages && playability.messages[0]));\n  } else {\n    return null;\n  }\n};\n\n\nconst isRental = player_response => {\n  let playability = player_response.playabilityStatus;\n  return playability && playability.status === 'UNPLAYABLE' &&\n    playability.errorScreen && playability.errorScreen.playerLegacyDesktopYpcOfferRenderer;\n};\n\n\nconst isNotYetBroadcasted = player_response => {\n  let playability = player_response.playabilityStatus;\n  return playability && playability.status === 'LIVE_STREAM_OFFLINE';\n};\n\n\nconst getWatchHTMLURL = (id, options) => `${BASE_URL + id}&hl=${options.lang || 'en'}`;\nconst getWatchHTMLPageBody = (id, options) => {\n  const url = getWatchHTMLURL(id, options);\n  return exports.watchPageCache.getOrSet(url, () => utils.exposedMiniget(url, options).text());\n};\n\n\nconst EMBED_URL = 'https://www.youtube.com/embed/';\nconst getEmbedPageBody = (id, options) => {\n  const embedUrl = `${EMBED_URL + id}?hl=${options.lang || 'en'}`;\n  return utils.exposedMiniget(embedUrl, options).text();\n};\n\n\nconst getHTML5player = body => {\n  let html5playerRes =\n    /<script\\s+src=\"([^\"]+)\"(?:\\s+type=\"text\\/javascript\")?\\s+name=\"player_ias\\/base\"\\s*>|\"jsUrl\":\"([^\"]+)\"/\n      .exec(body);\n  return html5playerRes ? html5playerRes[1] || html5playerRes[2] : null;\n};\n\n\nconst getIdentityToken = (id, options, key, throwIfNotFound) =>\n  exports.cookieCache.getOrSet(key, async() => {\n    let page = await getWatchHTMLPageBody(id, options);\n    let match = page.match(/([\"'])ID_TOKEN\\1[:,]\\s?\"([^\"]+)\"/);\n    if (!match && throwIfNotFound) {\n      throw new UnrecoverableError('Cookie header used in request, but unable to find YouTube identity token');\n    }\n    return match && match[2];\n  });\n\n\n/**\n * Goes through each endpoint in the pipeline, retrying on failure if the error is recoverable.\n * If unable to succeed with one endpoint, moves onto the next one.\n *\n * @param {Array.<Object>} args\n * @param {Function} validate\n * @param {Object} retryOptions\n * @param {Array.<Function>} endpoints\n * @returns {[Object, Object, Object]}\n */\nconst pipeline = async(args, validate, retryOptions, endpoints) => {\n  let info;\n  for (let func of endpoints) {\n    try {\n      const newInfo = await retryFunc(func, args.concat([info]), retryOptions);\n      if (newInfo.player_response) {\n        newInfo.player_response.videoDetails = assign(\n          info && info.player_response && info.player_response.videoDetails,\n          newInfo.player_response.videoDetails);\n        newInfo.player_response = assign(info && info.player_response, newInfo.player_response);\n      }\n      info = assign(info, newInfo);\n      if (validate(info, false)) {\n        break;\n      }\n    } catch (err) {\n      if (err instanceof UnrecoverableError || func === endpoints[endpoints.length - 1]) {\n        throw err;\n      }\n      // Unable to find video metadata... so try next endpoint.\n    }\n  }\n  return info;\n};\n\n\n/**\n * Like Object.assign(), but ignores `null` and `undefined` from `source`.\n *\n * @param {Object} target\n * @param {Object} source\n * @returns {Object}\n */\nconst assign = (target, source) => {\n  if (!target || !source) { return target || source; }\n  for (let [key, value] of Object.entries(source)) {\n    if (value !== null && value !== undefined) {\n      target[key] = value;\n    }\n  }\n  return target;\n};\n\n\n/**\n * Given a function, calls it with `args` until it's successful,\n * or until it encounters an unrecoverable error.\n * Currently, any error from miniget is considered unrecoverable. Errors such as\n * too many redirects, invalid URL, status code 404, status code 502.\n *\n * @param {Function} func\n * @param {Array.<Object>} args\n * @param {Object} options\n * @param {number} options.maxRetries\n * @param {Object} options.backoff\n * @param {number} options.backoff.inc\n */\nconst retryFunc = async(func, args, options) => {\n  let currentTry = 0, result;\n  while (currentTry <= options.maxRetries) {\n    try {\n      result = await func(...args);\n      break;\n    } catch (err) {\n      if (err instanceof UnrecoverableError ||\n        (err instanceof miniget.MinigetError && err.statusCode < 500) || currentTry >= options.maxRetries) {\n        throw err;\n      }\n      let wait = Math.min(++currentTry * options.backoff.inc, options.backoff.max);\n      await new Promise(resolve => setTimeout(resolve, wait));\n    }\n  }\n  return result;\n};\n\n\nconst jsonClosingChars = /^[)\\]}'\\s]+/;\nconst parseJSON = (source, varName, json) => {\n  if (!json || typeof json === 'object') {\n    return json;\n  } else {\n    try {\n      json = json.replace(jsonClosingChars, '');\n      return JSON.parse(json);\n    } catch (err) {\n      throw Error(`Error parsing ${varName} in ${source}: ${err.message}`);\n    }\n  }\n};\n\n\nconst findJSON = (source, varName, body, left, right, prependJSON) => {\n  let jsonStr = utils.between(body, left, right);\n  if (!jsonStr) {\n    throw Error(`Could not find ${varName} in ${source}`);\n  }\n  return parseJSON(source, varName, utils.cutAfterJSON(`${prependJSON}${jsonStr}`));\n};\n\n\nconst findPlayerResponse = (source, info) => {\n  const player_response = info && (\n    (info.args && info.args.player_response) ||\n    info.player_response || info.playerResponse || info.embedded_player_response);\n  return parseJSON(source, 'player_response', player_response);\n};\n\n\nconst getWatchJSONURL = (id, options) => `${getWatchHTMLURL(id, options)}&pbj=1`;\nconst getWatchJSONPage = async(id, options) => {\n  const reqOptions = Object.assign({ headers: {} }, options.requestOptions);\n  let cookie = reqOptions.headers.Cookie || reqOptions.headers.cookie;\n  reqOptions.headers = Object.assign({\n    'x-youtube-client-name': '1',\n    'x-youtube-client-version': cver,\n    'x-youtube-identity-token': exports.cookieCache.get(cookie || 'browser') || '',\n  }, reqOptions.headers);\n\n  const setIdentityToken = async(key, throwIfNotFound) => {\n    if (reqOptions.headers['x-youtube-identity-token']) { return; }\n    reqOptions.headers['x-youtube-identity-token'] = await getIdentityToken(id, options, key, throwIfNotFound);\n  };\n\n  if (cookie) {\n    await setIdentityToken(cookie, true);\n  }\n\n  const jsonUrl = getWatchJSONURL(id, options);\n  const body = await utils.exposedMiniget(jsonUrl, options, reqOptions).text();\n  let parsedBody = parseJSON('watch.json', 'body', body);\n  if (parsedBody.reload === 'now') {\n    await setIdentityToken('browser', false);\n  }\n  if (parsedBody.reload === 'now' || !Array.isArray(parsedBody)) {\n    throw Error('Unable to retrieve video metadata in watch.json');\n  }\n  let info = parsedBody.reduce((part, curr) => Object.assign(curr, part), {});\n  info.player_response = findPlayerResponse('watch.json', info);\n  info.html5player = info.player && info.player.assets && info.player.assets.js;\n\n  return info;\n};\n\n\nconst getWatchHTMLPage = async(id, options) => {\n  let body = await getWatchHTMLPageBody(id, options);\n  let info = { page: 'watch' };\n  try {\n    cver = utils.between(body, '{\"key\":\"cver\",\"value\":\"', '\"}');\n    info.player_response = findJSON('watch.html', 'player_response',\n      body, /\\bytInitialPlayerResponse\\s*=\\s*\\{/i, '</script>', '{');\n  } catch (err) {\n    let args = findJSON('watch.html', 'player_response', body, /\\bytplayer\\.config\\s*=\\s*{/, '</script>', '{');\n    info.player_response = findPlayerResponse('watch.html', args);\n  }\n  info.response = findJSON('watch.html', 'response', body, /\\bytInitialData(\"\\])?\\s*=\\s*\\{/i, '</script>', '{');\n  info.html5player = getHTML5player(body);\n  return info;\n};\n\n\nconst INFO_HOST = 'www.youtube.com';\nconst INFO_PATH = '/get_video_info';\nconst VIDEO_EURL = 'https://youtube.googleapis.com/v/';\nconst getVideoInfoPage = async(id, options) => {\n  const url = new URL(`https://${INFO_HOST}${INFO_PATH}`);\n  url.searchParams.set('video_id', id);\n  url.searchParams.set('c', 'TVHTML5');\n  url.searchParams.set('cver', `7${cver.substr(1)}`);\n  url.searchParams.set('eurl', VIDEO_EURL + id);\n  url.searchParams.set('ps', 'default');\n  url.searchParams.set('gl', 'US');\n  url.searchParams.set('hl', options.lang || 'en');\n  url.searchParams.set('html5', '1');\n  const body = await utils.exposedMiniget(url.toString(), options).text();\n  let info = querystring.parse(body);\n  info.player_response = findPlayerResponse('get_video_info', info);\n  return info;\n};\n\n\n/**\n * @param {Object} player_response\n * @returns {Array.<Object>}\n */\nconst parseFormats = player_response => {\n  let formats = [];\n  if (player_response && player_response.streamingData) {\n    formats = formats\n      .concat(player_response.streamingData.formats || [])\n      .concat(player_response.streamingData.adaptiveFormats || []);\n  }\n  return formats;\n};\n\n\n/**\n * Gets info from a video additional formats and deciphered URLs.\n *\n * @param {string} id\n * @param {Object} options\n * @returns {Promise<Object>}\n */\nexports.getInfo = async(id, options) => {\n  let info = await exports.getBasicInfo(id, options);\n  const hasManifest =\n    info.player_response && info.player_response.streamingData && (\n      info.player_response.streamingData.dashManifestUrl ||\n      info.player_response.streamingData.hlsManifestUrl\n    );\n  let funcs = [];\n  if (info.formats.length) {\n    info.html5player = info.html5player ||\n      getHTML5player(await getWatchHTMLPageBody(id, options)) || getHTML5player(await getEmbedPageBody(id, options));\n    if (!info.html5player) {\n      throw Error('Unable to find html5player file');\n    }\n    const html5player = new URL(info.html5player, BASE_URL).toString();\n    funcs.push(sig.decipherFormats(info.formats, html5player, options));\n  }\n  if (hasManifest && info.player_response.streamingData.dashManifestUrl) {\n    let url = info.player_response.streamingData.dashManifestUrl;\n    funcs.push(getDashManifest(url, options));\n  }\n  if (hasManifest && info.player_response.streamingData.hlsManifestUrl) {\n    let url = info.player_response.streamingData.hlsManifestUrl;\n    funcs.push(getM3U8(url, options));\n  }\n\n  let results = await Promise.all(funcs);\n  info.formats = Object.values(Object.assign({}, ...results));\n  info.formats = info.formats.map(formatUtils.addFormatMeta);\n  info.formats.sort(formatUtils.sortFormats);\n  info.full = true;\n  return info;\n};\n\n\n/**\n * Gets additional DASH formats.\n *\n * @param {string} url\n * @param {Object} options\n * @returns {Promise<Array.<Object>>}\n */\nconst getDashManifest = (url, options) => new Promise((resolve, reject) => {\n  let formats = {};\n  const parser = sax.parser(false);\n  parser.onerror = reject;\n  let adaptationSet;\n  parser.onopentag = node => {\n    if (node.name === 'ADAPTATIONSET') {\n      adaptationSet = node.attributes;\n    } else if (node.name === 'REPRESENTATION') {\n      const itag = parseInt(node.attributes.ID);\n      if (!isNaN(itag)) {\n        formats[url] = Object.assign({\n          itag, url,\n          bitrate: parseInt(node.attributes.BANDWIDTH),\n          mimeType: `${adaptationSet.MIMETYPE}; codecs=\"${node.attributes.CODECS}\"`,\n        }, node.attributes.HEIGHT ? {\n          width: parseInt(node.attributes.WIDTH),\n          height: parseInt(node.attributes.HEIGHT),\n          fps: parseInt(node.attributes.FRAMERATE),\n        } : {\n          audioSampleRate: node.attributes.AUDIOSAMPLINGRATE,\n        });\n      }\n    }\n  };\n  parser.onend = () => { resolve(formats); };\n  const req = utils.exposedMiniget(new URL(url, BASE_URL).toString(), options);\n  req.setEncoding('utf8');\n  req.on('error', reject);\n  req.on('data', chunk => { parser.write(chunk); });\n  req.on('end', parser.close.bind(parser));\n});\n\n\n/**\n * Gets additional formats.\n *\n * @param {string} url\n * @param {Object} options\n * @returns {Promise<Array.<Object>>}\n */\nconst getM3U8 = async(url, options) => {\n  url = new URL(url, BASE_URL);\n  const body = await utils.exposedMiniget(url.toString(), options).text();\n  let formats = {};\n  body\n    .split('\\n')\n    .filter(line => /^https?:\\/\\//.test(line))\n    .forEach(line => {\n      const itag = parseInt(line.match(/\\/itag\\/(\\d+)\\//)[1]);\n      formats[line] = { itag, url: line };\n    });\n  return formats;\n};\n\n\n// Cache get info functions.\n// In case a user wants to get a video's info before downloading.\nfor (let funcName of ['getBasicInfo', 'getInfo']) {\n  /**\n   * @param {string} link\n   * @param {Object} options\n   * @returns {Promise<Object>}\n   */\n  const func = exports[funcName];\n  exports[funcName] = async(link, options = {}) => {\n    utils.checkForUpdates();\n    let id = await urlUtils.getVideoID(link);\n    const key = [funcName, id, options.lang].join('-');\n    return exports.cache.getOrSet(key, () => func(id, options));\n  };\n}\n\n\n// Export a few helpers.\nexports.validateID = urlUtils.validateID;\nexports.validateURL = urlUtils.validateURL;\nexports.getURLVideoID = urlUtils.getURLVideoID;\nexports.getVideoID = urlUtils.getVideoID;\n","const querystring = require('querystring');\nconst Cache = require('./cache');\nconst utils = require('./utils');\nconst vm = require('vm');\n\n// A shared cache to keep track of html5player js functions.\nexports.cache = new Cache();\n\n/**\n * Extract signature deciphering and n parameter transform functions from html5player file.\n *\n * @param {string} html5playerfile\n * @param {Object} options\n * @returns {Promise<Array.<string>>}\n */\nexports.getFunctions = (html5playerfile, options) => exports.cache.getOrSet(html5playerfile, async() => {\n  const body = await utils.exposedMiniget(html5playerfile, options).text();\n  const functions = exports.extractFunctions(body);\n  if (!functions || !functions.length) {\n    throw Error('Could not extract functions');\n  }\n  exports.cache.set(html5playerfile, functions);\n  return functions;\n});\n\n/**\n * Extracts the actions that should be taken to decipher a signature\n * and tranform the n parameter\n *\n * @param {string} body\n * @returns {Array.<string>}\n */\nexports.extractFunctions = body => {\n  const functions = [];\n  const extractManipulations = caller => {\n    const functionName = utils.between(caller, `a=a.split(\"\");`, `.`);\n    if (!functionName) return '';\n    const functionStart = `var ${functionName}={`;\n    const ndx = body.indexOf(functionStart);\n    if (ndx < 0) return '';\n    const subBody = body.slice(ndx + functionStart.length - 1);\n    return `var ${functionName}=${utils.cutAfterJSON(subBody)}`;\n  };\n  const extractDecipher = () => {\n    const functionName = utils.between(body, `a.set(\"alr\",\"yes\");c&&(c=`, `(decodeURIC`);\n    if (functionName && functionName.length) {\n      const functionStart = `${functionName}=function(a)`;\n      const ndx = body.indexOf(functionStart);\n      if (ndx >= 0) {\n        const subBody = body.slice(ndx + functionStart.length);\n        let functionBody = `var ${functionStart}${utils.cutAfterJSON(subBody)}`;\n        functionBody = `${extractManipulations(functionBody)};${functionBody};${functionName}(sig);`;\n        functions.push(functionBody);\n      }\n    }\n  };\n  const extractNCode = () => {\n    let functionName = utils.between(body, `&&(b=a.get(\"n\"))&&(b=`, `(b)`);\n    if (functionName.includes('[')) functionName = utils.between(body, `${functionName.split('[')[0]}=[`, `]`);\n    if (functionName && functionName.length) {\n      const functionStart = `${functionName}=function(a)`;\n      const ndx = body.indexOf(functionStart);\n      if (ndx >= 0) {\n        const subBody = body.slice(ndx + functionStart.length);\n        const functionBody = `var ${functionStart}${utils.cutAfterJSON(subBody)};${functionName}(ncode);`;\n        functions.push(functionBody);\n      }\n    }\n  };\n  extractDecipher();\n  extractNCode();\n  return functions;\n};\n\n/**\n * Apply decipher and n-transform to individual format\n *\n * @param {Object} format\n * @param {vm.Script} decipherScript\n * @param {vm.Script} nTransformScript\n */\nexports.setDownloadURL = (format, decipherScript, nTransformScript) => {\n  const decipher = url => {\n    const args = querystring.parse(url);\n    if (!args.s || !decipherScript) return args.url;\n    const components = new URL(decodeURIComponent(args.url));\n    components.searchParams.set(args.sp ? args.sp : 'signature',\n      decipherScript.runInNewContext({ sig: decodeURIComponent(args.s) }));\n    return components.toString();\n  };\n  const ncode = url => {\n    const components = new URL(decodeURIComponent(url));\n    const n = components.searchParams.get('n');\n    if (!n || !nTransformScript) return url;\n    components.searchParams.set('n', nTransformScript.runInNewContext({ ncode: n }));\n    return components.toString();\n  };\n  const cipher = !format.url;\n  const url = format.url || format.signatureCipher || format.cipher;\n  format.url = cipher ? ncode(decipher(url)) : ncode(url);\n  delete format.signatureCipher;\n  delete format.cipher;\n};\n\n/**\n * Applies decipher and n parameter transforms to all format URL's.\n *\n * @param {Array.<Object>} formats\n * @param {string} html5player\n * @param {Object} options\n */\nexports.decipherFormats = async(formats, html5player, options) => {\n  let decipheredFormats = {};\n  let functions = await exports.getFunctions(html5player, options);\n  const decipherScript = functions.length ? new vm.Script(functions[0]) : null;\n  const nTransformScript = functions.length > 1 ? new vm.Script(functions[1]) : null;\n  formats.forEach(format => {\n    exports.setDownloadURL(format, decipherScript, nTransformScript);\n    decipheredFormats[format.url] = format;\n  });\n  return decipheredFormats;\n};\n","const PassThrough = require('stream').PassThrough;\nconst getInfo = require('./info');\nconst utils = require('./utils');\nconst formatUtils = require('./format-utils');\nconst urlUtils = require('./url-utils');\nconst sig = require('./sig');\nconst miniget = require('miniget');\nconst m3u8stream = require('m3u8stream');\nconst { parseTimestamp } = require('m3u8stream');\n\n\n/**\n * @param {string} link\n * @param {!Object} options\n * @returns {ReadableStream}\n */\nconst ytdl = (link, options) => {\n  const stream = createStream(options);\n  ytdl.getInfo(link, options).then(info => {\n    downloadFromInfoCallback(stream, info, options);\n  }, stream.emit.bind(stream, 'error'));\n  return stream;\n};\nmodule.exports = ytdl;\n\nytdl.getBasicInfo = getInfo.getBasicInfo;\nytdl.getInfo = getInfo.getInfo;\nytdl.chooseFormat = formatUtils.chooseFormat;\nytdl.filterFormats = formatUtils.filterFormats;\nytdl.validateID = urlUtils.validateID;\nytdl.validateURL = urlUtils.validateURL;\nytdl.getURLVideoID = urlUtils.getURLVideoID;\nytdl.getVideoID = urlUtils.getVideoID;\nytdl.cache = {\n  sig: sig.cache,\n  info: getInfo.cache,\n  watch: getInfo.watchPageCache,\n  cookie: getInfo.cookieCache,\n};\nytdl.version = require('../package.json').version;\n\n\nconst createStream = options => {\n  const stream = new PassThrough({\n    highWaterMark: (options && options.highWaterMark) || 1024 * 512,\n  });\n  stream._destroy = () => { stream.destroyed = true; };\n  return stream;\n};\n\n\nconst pipeAndSetEvents = (req, stream, end) => {\n  // Forward events from the request to the stream.\n  [\n    'abort', 'request', 'response', 'error', 'redirect', 'retry', 'reconnect',\n  ].forEach(event => {\n    req.prependListener(event, stream.emit.bind(stream, event));\n  });\n  req.pipe(stream, { end });\n};\n\n\n/**\n * Chooses a format to download.\n *\n * @param {stream.Readable} stream\n * @param {Object} info\n * @param {Object} options\n */\nconst downloadFromInfoCallback = (stream, info, options) => {\n  options = options || {};\n\n  let err = utils.playError(info.player_response, ['UNPLAYABLE', 'LIVE_STREAM_OFFLINE', 'LOGIN_REQUIRED']);\n  if (err) {\n    stream.emit('error', err);\n    return;\n  }\n\n  if (!info.formats.length) {\n    stream.emit('error', Error('This video is unavailable'));\n    return;\n  }\n\n  let format;\n  try {\n    format = formatUtils.chooseFormat(info.formats, options);\n  } catch (e) {\n    stream.emit('error', e);\n    return;\n  }\n  stream.emit('info', info, format);\n  if (stream.destroyed) { return; }\n\n  let contentLength, downloaded = 0;\n  const ondata = chunk => {\n    downloaded += chunk.length;\n    stream.emit('progress', chunk.length, downloaded, contentLength);\n  };\n\n  // Download the file in chunks, in this case the default is 10MB,\n  // anything over this will cause youtube to throttle the download\n  const dlChunkSize = options.dlChunkSize || 1024 * 1024 * 10;\n  let req;\n  let shouldEnd = true;\n\n  if (format.isHLS || format.isDashMPD) {\n    req = m3u8stream(format.url, {\n      chunkReadahead: +info.live_chunk_readahead,\n      begin: options.begin || (format.isLive && Date.now()),\n      liveBuffer: options.liveBuffer,\n      requestOptions: options.requestOptions,\n      parser: format.isDashMPD ? 'dash-mpd' : 'm3u8',\n      id: format.itag,\n    });\n\n    req.on('progress', (segment, totalSegments) => {\n      stream.emit('progress', segment.size, segment.num, totalSegments);\n    });\n    pipeAndSetEvents(req, stream, shouldEnd);\n  } else {\n    const requestOptions = Object.assign({}, options.requestOptions, {\n      maxReconnects: 6,\n      maxRetries: 3,\n      backoff: { inc: 500, max: 10000 },\n    });\n\n    let shouldBeChunked = dlChunkSize !== 0 && (!format.hasAudio || !format.hasVideo);\n\n    if (shouldBeChunked) {\n      let start = (options.range && options.range.start) || 0;\n      let end = start + dlChunkSize;\n      const rangeEnd = options.range && options.range.end;\n\n      contentLength = options.range ?\n        (rangeEnd ? rangeEnd + 1 : parseInt(format.contentLength)) - start :\n        parseInt(format.contentLength);\n\n      const getNextChunk = () => {\n        if (!rangeEnd && end >= contentLength) end = 0;\n        if (rangeEnd && end > rangeEnd) end = rangeEnd;\n        shouldEnd = !end || end === rangeEnd;\n\n        requestOptions.headers = Object.assign({}, requestOptions.headers, {\n          Range: `bytes=${start}-${end || ''}`,\n        });\n\n        req = miniget(format.url, requestOptions);\n        req.on('data', ondata);\n        req.on('end', () => {\n          if (stream.destroyed) { return; }\n          if (end && end !== rangeEnd) {\n            start = end + 1;\n            end += dlChunkSize;\n            getNextChunk();\n          }\n        });\n        pipeAndSetEvents(req, stream, shouldEnd);\n      };\n      getNextChunk();\n    } else {\n      // Audio only and video only formats don't support begin\n      if (options.begin) {\n        format.url += `&begin=${parseTimestamp(options.begin)}`;\n      }\n      if (options.range && (options.range.start || options.range.end)) {\n        requestOptions.headers = Object.assign({}, requestOptions.headers, {\n          Range: `bytes=${options.range.start || '0'}-${options.range.end || ''}`,\n        });\n      }\n      req = miniget(format.url, requestOptions);\n      req.on('response', res => {\n        if (stream.destroyed) { return; }\n        contentLength = contentLength || parseInt(res.headers['content-length']);\n      });\n      req.on('data', ondata);\n      pipeAndSetEvents(req, stream, shouldEnd);\n    }\n  }\n\n  stream._destroy = () => {\n    stream.destroyed = true;\n    req.destroy();\n    req.end();\n  };\n};\n\n\n/**\n * Can be used to download video after its `info` is gotten through\n * `ytdl.getInfo()`. In case the user might want to look at the\n * `info` object before deciding to download.\n *\n * @param {Object} info\n * @param {!Object} options\n * @returns {ReadableStream}\n */\nytdl.downloadFromInfo = (info, options) => {\n  const stream = createStream(options);\n  if (!info.full) {\n    throw Error('Cannot use `ytdl.downloadFromInfo()` when called ' +\n      'with info from `ytdl.getBasicInfo()`');\n  }\n  setImmediate(() => {\n    downloadFromInfoCallback(stream, info, options);\n  });\n  return stream;\n};\n","const { setTimeout } = require('timers');\n\n// A cache that expires.\nmodule.exports = class Cache extends Map {\n  constructor(timeout = 1000) {\n    super();\n    this.timeout = timeout;\n  }\n  set(key, value) {\n    if (this.has(key)) {\n      clearTimeout(super.get(key).tid);\n    }\n    super.set(key, {\n      tid: setTimeout(this.delete.bind(this, key), this.timeout).unref(),\n      value,\n    });\n  }\n  get(key) {\n    let entry = super.get(key);\n    if (entry) {\n      return entry.value;\n    }\n    return null;\n  }\n  getOrSet(key, fn) {\n    if (this.has(key)) {\n      return this.get(key);\n    } else {\n      let value = fn();\n      this.set(key, value);\n      (async() => {\n        try {\n          await value;\n        } catch (err) {\n          this.delete(key);\n        }\n      })();\n      return value;\n    }\n  }\n  delete(key) {\n    let entry = super.get(key);\n    if (entry) {\n      clearTimeout(entry.tid);\n      super.delete(key);\n    }\n  }\n  clear() {\n    for (let entry of this.values()) {\n      clearTimeout(entry.tid);\n    }\n    super.clear();\n  }\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressBar.vue?vue&type=style&index=0&lang=css&\"","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst stream_1 = require(\"stream\");\nconst sax_1 = __importDefault(require(\"sax\"));\nconst parse_time_1 = require(\"./parse-time\");\n/**\n * A wrapper around sax that emits segments.\n */\nclass DashMPDParser extends stream_1.Writable {\n    constructor(targetID) {\n        super();\n        this._parser = sax_1.default.createStream(false, { lowercase: true });\n        this._parser.on('error', this.destroy.bind(this));\n        let lastTag;\n        let currtime = 0;\n        let seq = 0;\n        let segmentTemplate;\n        let timescale, offset, duration, baseURL;\n        let timeline = [];\n        let getSegments = false;\n        let gotSegments = false;\n        let isStatic;\n        let treeLevel;\n        let periodStart;\n        const tmpl = (str) => {\n            const context = {\n                RepresentationID: targetID,\n                Number: seq,\n                Time: currtime,\n            };\n            return str.replace(/\\$(\\w+)\\$/g, (m, p1) => `${context[p1]}`);\n        };\n        this._parser.on('opentag', node => {\n            switch (node.name) {\n                case 'mpd':\n                    currtime =\n                        node.attributes.availabilitystarttime ?\n                            new Date(node.attributes.availabilitystarttime).getTime() : 0;\n                    isStatic = node.attributes.type !== 'dynamic';\n                    break;\n                case 'period':\n                    // Reset everything on <Period> tag.\n                    seq = 0;\n                    timescale = 1000;\n                    duration = 0;\n                    offset = 0;\n                    baseURL = [];\n                    treeLevel = 0;\n                    periodStart = parse_time_1.durationStr(node.attributes.start) || 0;\n                    break;\n                case 'segmentlist':\n                    seq = parseInt(node.attributes.startnumber) || seq;\n                    timescale = parseInt(node.attributes.timescale) || timescale;\n                    duration = parseInt(node.attributes.duration) || duration;\n                    offset = parseInt(node.attributes.presentationtimeoffset) || offset;\n                    break;\n                case 'segmenttemplate':\n                    segmentTemplate = node.attributes;\n                    seq = parseInt(node.attributes.startnumber) || seq;\n                    timescale = parseInt(node.attributes.timescale) || timescale;\n                    break;\n                case 'segmenttimeline':\n                case 'baseurl':\n                    lastTag = node.name;\n                    break;\n                case 's':\n                    timeline.push({\n                        duration: parseInt(node.attributes.d),\n                        repeat: parseInt(node.attributes.r),\n                        time: parseInt(node.attributes.t),\n                    });\n                    break;\n                case 'adaptationset':\n                case 'representation':\n                    treeLevel++;\n                    if (!targetID) {\n                        targetID = node.attributes.id;\n                    }\n                    getSegments = node.attributes.id === `${targetID}`;\n                    if (getSegments) {\n                        if (periodStart) {\n                            currtime += periodStart;\n                        }\n                        if (offset) {\n                            currtime -= offset / timescale * 1000;\n                        }\n                        this.emit('starttime', currtime);\n                    }\n                    break;\n                case 'initialization':\n                    if (getSegments) {\n                        this.emit('item', {\n                            url: baseURL.filter(s => !!s).join('') + node.attributes.sourceurl,\n                            seq: seq,\n                            init: true,\n                            duration: 0,\n                        });\n                    }\n                    break;\n                case 'segmenturl':\n                    if (getSegments) {\n                        gotSegments = true;\n                        let tl = timeline.shift();\n                        let segmentDuration = ((tl === null || tl === void 0 ? void 0 : tl.duration) || duration) / timescale * 1000;\n                        this.emit('item', {\n                            url: baseURL.filter(s => !!s).join('') + node.attributes.media,\n                            seq: seq++,\n                            duration: segmentDuration,\n                        });\n                        currtime += segmentDuration;\n                    }\n                    break;\n            }\n        });\n        const onEnd = () => {\n            if (isStatic) {\n                this.emit('endlist');\n            }\n            if (!getSegments) {\n                this.destroy(Error(`Representation '${targetID}' not found`));\n            }\n            else {\n                this.emit('end');\n            }\n        };\n        this._parser.on('closetag', tagName => {\n            switch (tagName) {\n                case 'adaptationset':\n                case 'representation':\n                    treeLevel--;\n                    if (segmentTemplate && timeline.length) {\n                        gotSegments = true;\n                        if (segmentTemplate.initialization) {\n                            this.emit('item', {\n                                url: baseURL.filter(s => !!s).join('') +\n                                    tmpl(segmentTemplate.initialization),\n                                seq: seq,\n                                init: true,\n                                duration: 0,\n                            });\n                        }\n                        for (let { duration: itemDuration, repeat, time } of timeline) {\n                            itemDuration = itemDuration / timescale * 1000;\n                            repeat = repeat || 1;\n                            currtime = time || currtime;\n                            for (let i = 0; i < repeat; i++) {\n                                this.emit('item', {\n                                    url: baseURL.filter(s => !!s).join('') +\n                                        tmpl(segmentTemplate.media),\n                                    seq: seq++,\n                                    duration: itemDuration,\n                                });\n                                currtime += itemDuration;\n                            }\n                        }\n                    }\n                    if (gotSegments) {\n                        this.emit('endearly');\n                        onEnd();\n                        this._parser.removeAllListeners();\n                        this.removeAllListeners('finish');\n                    }\n                    break;\n            }\n        });\n        this._parser.on('text', text => {\n            if (lastTag === 'baseurl') {\n                baseURL[treeLevel] = text;\n                lastTag = null;\n            }\n        });\n        this.on('finish', onEnd);\n    }\n    _write(chunk, encoding, callback) {\n        this._parser.write(chunk);\n        callback();\n    }\n}\nexports.default = DashMPDParser;\n//# sourceMappingURL=dash-mpd-parser.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"progress-bar-wrapper\",style:({\n    top: _vm.realTop,\n    opacity: _vm.value >= 100 ? 1 : 1,\n  })},[_c('div',{staticClass:\"progress-bar-container\"},[_c('div',{staticClass:\"progress-bar-value\",style:({\n        width: _vm.realPercent,\n        height: _vm.realSize,\n        background: _vm.realColor,\n        'transition-property': 'width',\n        'transition-delay': _vm.delay,\n        'transition-duration': _vm.duration,\n        'transition-timing-function': _vm.timing,\n      })})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- \r\n    Issues:\r\n      - I want the bar to pop up / down BEFORE the width is adjusted\r\n  -->\r\n  <div\r\n    class=\"progress-bar-wrapper\"\r\n    :style=\"{\r\n      top: realTop,\r\n      opacity: value >= 100 ? 1 : 1,\r\n    }\"\r\n  >\r\n    <div class=\"progress-bar-container\">\r\n      <div\r\n        class=\"progress-bar-value\"\r\n        :style=\"{\r\n          width: realPercent,\r\n          height: realSize,\r\n          background: realColor,\r\n          'transition-property': 'width',\r\n          'transition-delay': delay,\r\n          'transition-duration': duration,\r\n          'transition-timing-function': timing,\r\n        }\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    percent: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    delay: {\r\n      type: String,\r\n      default: \"20ms\",\r\n    },\r\n    duration: {\r\n      type: String,\r\n      default: \"120ms\",\r\n    },\r\n    timing: {\r\n      type: String,\r\n      default: \"var(--quad)\",\r\n    },\r\n    size: {\r\n      type: Number,\r\n      default: 2,\r\n    },\r\n    color: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    value: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    debug: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  computed: {\r\n    realPercent() {\r\n      return `${this.realValue}%`;\r\n    },\r\n    realTransition() {\r\n      return `width ${this.timing}`;\r\n    },\r\n    realSize() {\r\n      return `${this.size}px`;\r\n    },\r\n    realColor() {\r\n      if (!this.color.length) return `var(--color-selection);`;\r\n      else {\r\n        if (!/-/.test(this.color)) return this.color;\r\n        return `var(--color-${this.color\r\n          .replace(/var\\(/, \"\")\r\n          .replace(/(--color-|color-)/, \"\")\r\n          .replace(/\\)$/, \"\")})`;\r\n      }\r\n    },\r\n  },\r\n  data: () => ({\r\n    realValue: 0,\r\n    realTop: 0,\r\n    locked: false,\r\n  }),\r\n  mounted() {\r\n    this.realValue = this.percent || this.value;\r\n    this.getRealTop();\r\n  },\r\n  watch: {\r\n    realTop(val) {\r\n      if (this.debug) console.log(\"Top is now:\", val);\r\n    },\r\n    percent(val) {\r\n      this.realValue = val;\r\n    },\r\n    value(val) {\r\n      this.realValue = val >= 0 && val <= 100 ? val : val >= 100 ? 100 : 0;\r\n    },\r\n    realValue(val, lastVal) {\r\n      const self = this;\r\n      if (this.debug)\r\n        console.log(\"VALUE:\", this.realValue, \"LAST VAL:\", lastVal);\r\n      if (val >= 100 || val <= 0 || lastVal >= 100 || lastVal <= 0) {\r\n        this.getRealTop();\r\n        if (this.debug) console.log(\"Toggle top first...\");\r\n        setTimeout(() => {\r\n          self.realValue = val >= 0 && val <= 100 ? val : val >= 100 ? 100 : 0;\r\n        }, 220);\r\n      } else {\r\n        if (this.debug) console.log(\"No toggle\");\r\n        this.realValue = val >= 0 && val <= 100 ? val : val >= 100 ? 100 : 0;\r\n      }\r\n      if (this.debug)\r\n        if (val >= 100) {\r\n          // console.log(val, lastVal);\r\n          this.locked = true;\r\n          setTimeout(() => {\r\n            self.reset();\r\n          }, 520);\r\n        }\r\n      this.$emit(\"input\", val);\r\n    },\r\n  },\r\n  methods: {\r\n    getRealTop() {\r\n      let temp = `${\r\n        this.value >= 100 || this.percent >= 100\r\n          ? this.size * -1\r\n          : this.value > 0 || this.percent > 0\r\n          ? this.size\r\n          : this.size * -1\r\n      }px`;\r\n      this.realTop = temp;\r\n    },\r\n    getProgressStyle() {\r\n      let style = \"\";\r\n      style += `height: ${this.size}; width: ${this.realValue}%;`;\r\n      return style;\r\n    },\r\n    reset() {\r\n      if (this.debug) console.log(\"RESET\");\r\n      this.$emit(\"reset\");\r\n      this.realValue = 0;\r\n      this.locked = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.progress-bar-wrapper {\r\n  transition: top 200ms var(--quad) 0ms, opacity 500ms var(--quad) 20ms;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  margin: 0;\r\n  height: fit-content;\r\n}\r\n.progress-bar-container {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: flex-start;\r\n  width: 100%;\r\n}\r\n\r\n.progress-bar-value {\r\n  background-color: var(--color-selection);\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProgressBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProgressBar.vue?vue&type=template&id=52394d20&\"\nimport script from \"./ProgressBar.vue?vue&type=script&lang=js&\"\nexport * from \"./ProgressBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProgressBar.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Wrapper',{staticClass:\"home-wrapper\"},[_c('div',{staticClass:\"error-container\",on:{\"mouseenter\":function($event){_vm.hoverError = true},\"mouseleave\":function($event){_vm.hoverError = false}}},[_c('div',{staticClass:\"error-content\"},[_c('Icon',{staticStyle:{\"margin-top\":\"-6px\",\"margin-right\":\"6px\"},attrs:{\"name\":\"alert-circle\"}}),_c('Anno',[_vm._v(_vm._s(_vm.errorText))])],1),_c('Button',{attrs:{\"flat\":\"\",\"icon\":\"close\",\"width\":\"20px\"},on:{\"click\":_vm.closeError}})],1),_c('Progress-Bar',{attrs:{\"delay\":\"0ms\",\"duration\":\"60ms\",\"percent\":_vm.progress,\"size\":3}}),_c('Input',{attrs:{\"label\":\"URL\",\"flat\":\"\",\"placeholder\":\"http://youtube.com/...\",\"clearable\":\"\",\"prefs-id\":\"url\"},on:{\"update\":_vm.checkURL,\"focus\":function($event){_vm.hasFocus = true},\"blur\":function($event){_vm.hasFocus = false},\"prefs\":function (data) { return (_vm.url = data.value); }},model:{value:(_vm.url),callback:function ($$v) {_vm.url=$$v},expression:\"url\"}}),_c('Fold',{attrs:{\"label\":\"Settings\",\"open\":true}},[_c('div',{staticClass:\"picker-row\"},[_c('div',{staticStyle:{\"width\":\"24px\"}},[_c('Toggle',{model:{value:(_vm.useCustomDir),callback:function ($$v) {_vm.useCustomDir=$$v},expression:\"useCustomDir\"}})],1),_c('File-Picker',{attrs:{\"folder\":\"\",\"clearable\":\"\",\"disabled\":!_vm.useCustomDir,\"fullPath\":true,\"label\":\"Output folder\",\"prefs-id\":\"folder\"},on:{\"prefs\":_vm.updateOutput,\"input\":_vm.updateOutput,\"clear\":function () { return (_vm.outputFolder = ''); }}})],1),_c('div',{staticClass:\"toggle-wrapper\"},[_c('Toggle',{staticStyle:{\"margin-right\":\"16px\"},attrs:{\"label\":\"Audio only\"},model:{value:(_vm.audioOnly),callback:function ($$v) {_vm.audioOnly=$$v},expression:\"audioOnly\"}}),_c('Toggle',{staticStyle:{\"margin-right\":\"16px\"},attrs:{\"label\":\"Video only\"},model:{value:(_vm.videoOnly),callback:function ($$v) {_vm.videoOnly=$$v},expression:\"videoOnly\"}})],1)]),_c('Fold',{attrs:{\"label\":\"Preview\",\"open\":true}},[_c('div',{staticClass:\"skeleton\"},[_c('div',{staticClass:\"skeleton-content\"},[(!_vm.hasValidURL)?_c('div',{staticClass:\"placeholder\"},[_c('Anno',{attrs:{\"uppercase\":\"\"}},[_vm._v(_vm._s(_vm.urlErrorMessage))])],1):_c('img',{staticClass:\"video-thumbnail\",attrs:{\"src\":_vm.thumbnail}})])]),_c('div',{staticStyle:{\"margin-top\":\"8px\"}}),_c('Anno',{attrs:{\"size\":\"11px\",\"color\":!_vm.validURL ? 'var(--color-btn-disabled-text)' : ''}},[_vm._v(_vm._s(_vm.vidDescription))])],1),_c('Divider'),_c('Button',{attrs:{\"disabled\":!_vm.canDownload,\"label\":_vm.contextualLabelString,\"uppercase\":\"\",\"icon\":_vm.hasDownloaded ? 'check' : _vm.isDownloading ? '' : 'download',\"block\":\"\",\"color\":_vm.isComplete ? 'var(--color-selection)' : 'var(--color-button-primary)'},on:{\"click\":_vm.beginDownload}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const libraries = require(\"./libraries.json\");\r\nif (!String.slug)\r\n  String.prototype.slug = function () {\r\n    let val = this[0].toLowerCase() + this.substring(1);\r\n    return val\r\n      .replace(/\\s/gm, \"\")\r\n      .replace(/\\&.{3,5}\\;/gm, \"\")\r\n      .trim();\r\n  };\r\n\r\nfunction constructAsCubicBezierString(obj) {\r\n  return `cubic-bezier(${obj.x1}, ${obj.y1}, ${obj.x2}, ${obj.y2})`;\r\n}\r\n\r\n/**\r\n * Retrieves all cubic-bezier animations of an author\r\n * @param {String} name Name of the author to retrieve library of\r\n * @returns {Object} Collection of cubic-bezier strings\r\n */\r\nfunction getLibraryByAuthor(name) {\r\n  name = name.slug();\r\n  if (!libraries[name]) {\r\n    console.error(\r\n      `Library of name '${name}' does not exist. Must be one of: ${Object.keys(\r\n        libraries\r\n      )\r\n        .map((name) => {\r\n          return `\"${name.slug()}\"`;\r\n        })\r\n        .join(\", \")}`\r\n    );\r\n    return null;\r\n  }\r\n  return constructLibraryFromAuthor(name);\r\n}\r\n\r\nfunction constructLibraryFromAuthor(name) {\r\n  let temp = {};\r\n  for (let val in libraries[name.slug()]) {\r\n    temp[val] = constructAsCubicBezierString(libraries[name.slug()][val]);\r\n  }\r\n  return temp;\r\n}\r\n\r\n/**\r\n * Collects all cubic-bezier strings from all authors\r\n */\r\nfunction getAll() {\r\n  let result = {};\r\n  for (let name in libraries) {\r\n    result[name] = {};\r\n    for (let val in libraries[name]) {\r\n      result[name][val] = constructAsCubicBezierString(libraries[name][val]);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n * Assigns all cubic-bezier strings as CSS variables to the active document\r\n */\r\nfunction assignAll() {\r\n  let temp = getAll();\r\n  for (let author in temp)\r\n    for (let value in temp[author]) setCSS(value, temp[author][value]);\r\n  return true;\r\n}\r\n\r\n/**\r\n * Assigns all cubic-bezier strings of a particular author to active document\r\n * @param {String} name Name of the author to retrieve library of\r\n */\r\nfunction assignLibraryByAuthor(name) {\r\n  let temp = getLibraryByAuthor(name.slug());\r\n  for (let value in temp) setCSS(value, temp[value]);\r\n  return true;\r\n}\r\n\r\n/**\r\n *\r\n * @param {String} name Name of cubic-bezier timing\r\n * @returns {String} Cubic bezier string\r\n */\r\nfunction getByName(name) {\r\n  let found = false;\r\n  for (let author in libraries) {\r\n    if (!found) {\r\n      let keys = Object.keys(libraries[author]);\r\n      let match = keys.find((key) => {\r\n        key == name.slug();\r\n      });\r\n      if (found) match = author;\r\n    }\r\n  }\r\n  if (!found) {\r\n    console.error(`No animation with name ${name.slug()} found.`);\r\n    return null;\r\n  }\r\n  return constructAsCubicBezierString(libraries[match][name.slug()]);\r\n}\r\n\r\n/**\r\n * Retrieves the current value of a given CSS variable\r\n * @param {String} prop The target name of variable, with or without leading dashes\r\n */\r\nfunction getCSS(prop) {\r\n  return window\r\n    .getComputedStyle(document.documentElement)\r\n    .getPropertyValue(`${/^\\-\\-/.test(prop) ? prop : \"--\" + prop}`);\r\n}\r\n\r\n/**\r\n * Sets the value of a given CSS variable\r\n * @param {String} prop The target name of variable, with or without leading dashes\r\n * @param {String} data The new CSS value to assign to variable\r\n */\r\nfunction setCSS(prop, data) {\r\n  document.documentElement.style.setProperty(\r\n    `${/^\\-\\-/.test(prop) ? prop : \"--\" + prop}`,\r\n    data\r\n  );\r\n}\r\n\r\nconst omodei = {\r\n  getCSS: getCSS,\r\n  setCSS: setCSS,\r\n  getLibraryByAuthor: getLibraryByAuthor,\r\n  getAll: getAll,\r\n  assignAll: assignAll,\r\n  assignLibraryByAuthor: assignLibraryByAuthor,\r\n  getByName: getByName,\r\n};\r\n\r\nexport default omodei;\r\n","<template>\n  <Wrapper class=\"home-wrapper\">\n    <div\n      class=\"error-container\"\n      @mouseenter=\"hoverError = true\"\n      @mouseleave=\"hoverError = false\"\n    >\n      <div class=\"error-content\">\n        <Icon name=\"alert-circle\" style=\"margin-top: -6px; margin-right: 6px\" />\n        <Anno>{{ errorText }}</Anno>\n      </div>\n      <Button flat icon=\"close\" @click=\"closeError\" width=\"20px\" />\n    </div>\n    <Progress-Bar delay=\"0ms\" duration=\"60ms\" :percent=\"progress\" :size=\"3\" />\n    <Input\n      label=\"URL\"\n      flat\n      v-model=\"url\"\n      placeholder=\"http://youtube.com/...\"\n      @update=\"checkURL\"\n      clearable\n      @focus=\"hasFocus = true\"\n      @blur=\"hasFocus = false\"\n      prefs-id=\"url\"\n      @prefs=\"(data) => (url = data.value)\"\n    />\n    <Fold label=\"Settings\" :open=\"true\">\n      <div class=\"picker-row\">\n        <div style=\"width: 24px\">\n          <Toggle v-model=\"useCustomDir\" />\n        </div>\n        <File-Picker\n          folder\n          clearable\n          :disabled=\"!useCustomDir\"\n          :fullPath=\"true\"\n          label=\"Output folder\"\n          prefs-id=\"folder\"\n          @prefs=\"updateOutput\"\n          @input=\"updateOutput\"\n          @clear=\"() => (outputFolder = '')\"\n        />\n      </div>\n      <div class=\"toggle-wrapper\">\n        <Toggle\n          label=\"Audio only\"\n          v-model=\"audioOnly\"\n          style=\"margin-right: 16px\"\n        />\n        <Toggle\n          label=\"Video only\"\n          v-model=\"videoOnly\"\n          style=\"margin-right: 16px\"\n        />\n      </div>\n    </Fold>\n    <Fold label=\"Preview\" :open=\"true\">\n      <div class=\"skeleton\">\n        <div class=\"skeleton-content\">\n          <div v-if=\"!hasValidURL\" class=\"placeholder\">\n            <Anno uppercase>{{ urlErrorMessage }}</Anno>\n          </div>\n          <img class=\"video-thumbnail\" v-else :src=\"thumbnail\" />\n        </div>\n      </div>\n      <div style=\"margin-top: 8px\"></div>\n      <Anno\n        size=\"11px\"\n        :color=\"!validURL ? 'var(--color-btn-disabled-text)' : ''\"\n        >{{ vidDescription }}</Anno\n      >\n    </Fold>\n    <Divider />\n    <Button\n      :disabled=\"!canDownload\"\n      :label=\"contextualLabelString\"\n      uppercase\n      :icon=\"hasDownloaded ? 'check' : isDownloading ? '' : 'download'\"\n      block\n      @click=\"beginDownload\"\n      :color=\"\n        isComplete ? 'var(--color-selection)' : 'var(--color-button-primary)'\n      \"\n    />\n  </Wrapper>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from \"vuex\";\nimport omodei from \"omodei\";\nimport { evalScript } from \"brutalism\";\nimport spy from \"cep-spy\";\nconst fs = require(\"fs\");\nconst ytdl = require(\"ytdl-core\");\nexport default {\n  components: {\n    \"Progress-Bar\": require(\"../components/ProgressBar.vue\").default,\n  },\n  data: () => ({\n    progress: 0,\n    url: \"\",\n    validURL: false,\n    title: \"\",\n    thumbnail: \"\",\n    hasFocus: false,\n    testedURL: false,\n    channelLink: \"\",\n    channelName: \"\",\n    outputFolder: \"\",\n    totalChunkSize: 0,\n    addedAudioChunks: false,\n    addedVideoChunks: false,\n    hasDownloaded: false,\n    isDownloading: false,\n    useRootDir: false,\n    chunkPrefix: 0,\n    isComplete: false,\n    contextText: \"\",\n    hasError: false,\n    errorText: \"Something went wrong\",\n    hoverError: false,\n  }),\n  async mounted() {\n    // Getting nice transitions and cubic bezier values from google motion design:\n    omodei.assignLibraryByAuthor(\"google\");\n    this.getSettings();\n    console.log(this.settings);\n    // If the panel was mounted and prefs are filled, automatically query the URL:\n    if (this.url.length) this.checkURL(this.url);\n  },\n  computed: {\n    ...mapGetters(\"settings\", [\"settings\"]),\n    contextualLabelString() {\n      return this.isComplete\n        ? \"Done\"\n        : this.isDownloading && !this.hasDownloaded\n        ? `${this.contextText} ${this.progress}%`\n        : this.hasDownloaded\n        ? this.contextText\n        : `Snatch ${this.snatchContext}`;\n    },\n    snatchContext() {\n      return this.videoOnly\n        ? \"best video\"\n        : this.audioOnly\n        ? \"best audio\"\n        : this.bestQuality\n        ? \"best video/audio\"\n        : \"fastest good quality\";\n    },\n    useCustomDir: {\n      get() {\n        return !this.settings.useRootDir;\n      },\n      set(val) {\n        this.setUseRootDir(!val);\n        // Noticed a discrepancy when toggling customDir, where File Picker value\n        // was being ignored due to value not having been recently set to this.outputFolder\n        if (val) {\n          let storage = window.localStorage;\n          let data = storage.getItem(\"brutalism-prefs\");\n          if (data) {\n            data = JSON.parse(data);\n            if (data && data.filepicker) {\n              let target = data.filepicker.find((i) => i.id == \"folder\");\n              if (target) this.outputFolder = target.value;\n            }\n          }\n        }\n      },\n    },\n    audioOnly: {\n      get() {\n        return this.settings.audioOnly;\n      },\n      set(val) {\n        this.setAudioOnly(val);\n      },\n    },\n    videoOnly: {\n      get() {\n        return this.settings.videoOnly;\n      },\n      set(val) {\n        this.setVideoOnly(val);\n      },\n    },\n    bestQuality: {\n      get() {\n        return this.settings.bestQuality;\n      },\n      set(val) {\n        this.setBestQuality(val);\n      },\n    },\n    canDownload() {\n      return this.hasValidURL && !this.isDownloading && !this.hasDownloaded;\n    },\n    vidDescription() {\n      return this.validURL ? this.realTitle : \"No title\";\n    },\n    realTitle() {\n      return this.title && this.validURL ? this.title : \"N/A\";\n    },\n    urlErrorMessage() {\n      return this.hasNoURL\n        ? \"No URL queried\"\n        : !this.testedURL\n        ? \"Ready to query\"\n        : this.hasFocus\n        ? \"Ready to query\"\n        : !this.validURL\n        ? \"Invalid URL\"\n        : \"Working...\";\n    },\n    hasNoURL() {\n      return !this.url || !this.url.length;\n    },\n    hasValidURL() {\n      return !this.hasNoURL && this.validURL;\n    },\n    outputPath() {\n      // @NOTE - Could be replaced with dynamic formats, but it might be too taking things a bit too far\n      return `${this.outputFolder}/${this.title}.${\n        this.audioOnly ? \"wav\" : \"mp4\"\n      }`;\n    },\n  },\n  watch: {\n    settings: {\n      handler() {\n        if (this.hasDownloaded) {\n          this.isComplete = false;\n          this.hasDownloaded = false;\n          this.isDownloading = false;\n        }\n      },\n      deep: true,\n    },\n    hasError(val) {\n      this.setCSS(\"--error-top\", `${val ? 0 : -70}px`);\n      let newVal = this.getCSS(\"--error-top\");\n      if (val)\n        setTimeout(() => {\n          document.addEventListener(\"click\", this.closeError, { once: true });\n        }, 120);\n      else {\n        document.removeEventListener(\"click\", this.closeError);\n        this.progress = 0;\n      }\n    },\n  },\n  methods: {\n    ...mapActions(\"settings\", [\n      \"setUseRootDir\",\n      \"setUrl\",\n      \"setBestQuality\",\n      \"setOutputDir\",\n      \"setAudioOnly\",\n      \"setVideoOnly\",\n      \"getSettings\",\n    ]),\n    closeError() {\n      this.hasError = false;\n    },\n    async ytdlOptions() {\n      // Likely be best to generate a dropdown containing all format options.\n      // Still unsure how to best solve 1080p, may opt for a CLI tool entirely instead\n      let info = await ytdl.getInfo(this.url);\n      if (this.videoOnly) {\n        let videoFormats = ytdl\n          .filterFormats(info.formats, \"videoonly\")\n          .filter(\n            (format) =>\n              format.container == \"mp4\" &&\n              format.hasAudio == false &&\n              format.itag !== 399\n          )\n          .sort((a, b) => b.height - a.height);\n        return { quality: videoFormats[0].itag };\n      } else if (this.audioOnly) {\n        let audioFormats = ytdl\n          .filterFormats(info.formats, \"audioonly\")\n          .filter((format) => /mp4/i.test(format.codecs))\n          .sort((a, b) => b.audioBitrate - a.audioBitrate);\n        return { quality: audioFormats[0].itag };\n      } else\n        return {\n          filter: \"audioandvideo\",\n          quality: \"highestvideo\",\n        };\n    },\n    updateOutput(data) {\n      if (Array.isArray(data) && data.length) this.outputFolder = data[0];\n      else {\n        console.error(\"Unexpected non-Array fed into File-Picker:\", data);\n      }\n    },\n    createError(text) {\n      this.isDownloading = false;\n      this.hasDownloaded = false;\n      this.isComplete = false;\n      this.contextText = \"\";\n      this.percent = 0;\n      this.hasError = true;\n      this.errorText = text;\n    },\n    async checkURL(data) {\n      this.setUrl(data);\n      this.testedURL = false;\n      this.hasDownloaded = false;\n      try {\n        let info = await ytdl.getInfo(data).catch((err) => {\n          this.validURL = false;\n          this.testedURL = true;\n        });\n        this.title = info.player_response.videoDetails.title.replace(\n          /[/\\\\?%*:|\"<>]/g,\n          \"-\"\n        );\n        this.thumbnail =\n          info.player_response.microformat.playerMicroformatRenderer.thumbnail.thumbnails[0].url;\n        this.channelLink = info.player_response.videoDetails.ownerProfileUrl;\n        this.channelName =\n          info.player_response.videoDetails.author.name ||\n          info.player_response.videoDetails.author;\n        this.validURL = true;\n        this.testedURL = true;\n      } catch (err) {\n        console.error(err);\n        // Shouldn't spam the user with an error message here, reserve it for meaningful ones\n        this.validURL = false;\n        this.testedURL = true;\n        this.clearData();\n        return false;\n      }\n    },\n    async getParentRootFromJSX() {\n      console.log(\"Get root parent:\");\n      let result;\n      if (spy.appName == \"AEFT\") {\n        result = await evalScript(`(function() {\n          return File(app.project.file).parent.fsName;\n        }())`);\n      } else if (spy.appName == \"AUDT\") {\n        // AUDT not supported. I'd love to add it, but there's little to no info about AUDT scripting online\n        return null;\n      } else {\n        result = await evalScript(`(function() {\n          return File(app.project.path).parent.fsName;\n        }())`);\n      }\n      console.log(result);\n      if (/evalscript\\serror/i.test(result)) {\n        console.error(\"Eval error, silent failure\");\n        this.createError(\"Project must be saved first\");\n        return null;\n      }\n      return result.replace(/\\\\/g, \"/\").replace(/\\/$/, \"\");\n    },\n    async beginDownload() {\n      if (!this.canDownload) {\n        console.error(\"Func is running without valid URL or params\");\n        return null;\n      }\n      this.progress = this.chunkPrefix = 0;\n      this.isDownloading = true;\n      this.hasDownloaded = false;\n      this.isComplete = false;\n      if (!this.useCustomDir) {\n        this.contextText = \"Retrieving project filepath\";\n        let parentRoot = await this.getParentRootFromJSX();\n        if (parentRoot) {\n          console.log(this.outputFolder);\n          if (\n            (/(support files|library)/i.test(parentRoot) &&\n              /adobe (after effects|premiere pro) \\d{1,}/i.test(parentRoot)) ||\n            (/applications/i.test(parentRoot) && /adobe/i.test(parentRoot))\n          ) {\n            this.createError(\"Must save project before using it's root path\");\n            return null;\n          } else {\n            this.outputFolder = parentRoot;\n          }\n        } else {\n          this.isDownloading = false;\n          return null;\n        }\n      }\n\n      // Ensure that no read/write streams fail from conflicting pre-existing file access\n      try {\n        if (fs.existsSync(this.outputPath)) {\n          console.log(\"File exists:\", this.outputPath);\n          fs.unlinkSync(this.outputPath);\n        } else {\n          console.log(\"File does not exist:\", this.outputPath);\n        }\n      } catch (err) {\n        this.createError(\n          \"File of this same path is already in use and locked by the app\"\n        );\n        console.error(`Not able to delete previous file:`, err);\n        this.isDownloading = false;\n        this.progress = 0;\n        this.isComplete = false;\n        this.hasDownloaded = false;\n        return null;\n      }\n      let hasError = false;\n      let download = await this.downloadAndInjectVideoYTDL().catch((err) => {\n        hasError = true;\n        return null;\n      });\n      if (hasError) return null;\n      if (download) {\n        let injection = await evalScript(this.generateJSXText());\n        console.log(injection);\n      } else {\n        this.createError(\"Youtube video not available for download\");\n      }\n      this.isDownloading = false;\n      this.isComplete = true;\n    },\n    async downloadAndInjectVideoYTDL() {\n      this.contextText = \"Determining best format\";\n      let opts = await this.ytdlOptions();\n      return new Promise((resolve, reject) => {\n        this.contextText = \"Snatching\";\n        this.progress = 0;\n        this.hasDownloaded = false;\n        this.isDownloading = true;\n        try {\n          ytdl(this.url, opts)\n            .on(\"progress\", (chunkSize, downloaded, size) => {\n              this.progress = Math.round((downloaded / size) * 100);\n            })\n            .on(\"finish\", () => {\n              this.hasDownloaded = true;\n              this.isDownloading = false;\n              resolve(true);\n            })\n            .on(\"error\", (err) => {\n              console.error(err);\n              this.createError(\"Video unavailable\");\n              reject(false);\n            })\n            .pipe(fs.createWriteStream(this.outputPath))\n            .on(\"error\", (err) => {\n              this.createError(\"Cannot overwrite file already in use\");\n              this.progress = 0;\n              this.isDownloading = false;\n              reject(null);\n            });\n        } catch (err) {\n          console.error(err);\n          this.createError(\"Video unavailable\");\n        }\n      });\n    },\n    generateJSXText() {\n      if (spy.appName == \"PPRO\") {\n        return `app.project.importFiles([new File(\"${this.outputPath\n          .replace(/\\\\/gm, \"/\")\n          .replace(/\\//gm, \"\\\\\\\\\")}\").fsName]);`;\n      } else if (spy.appName == \"AEFT\") {\n        return `app.project.importFile(new ImportOptions(new File(\"${this.outputPath\n          .replace(/\\\\/gm, \"/\")\n          .replace(/\\//gm, \"\\\\\\\\\")}\")));`;\n      } else {\n        // Would love to add Audition support but information about scripting in AUDT is non-existent\n      }\n    },\n    clearData() {\n      this.progress = 0;\n      this.title = \"\";\n      this.validURL = false;\n      this.channelLink = \"\";\n      this.channelName = \"\";\n      this.hasDownloaded = false;\n      this.isDownloading = false;\n      this.isComplete = false;\n    },\n    setCSS(prop, data) {\n      document.documentElement.style.setProperty(\n        `${/^\\-\\-/.test(prop) ? prop : \"--\" + prop}`,\n        data\n      );\n    },\n    getCSS(prop) {\n      return window\n        .getComputedStyle(document.documentElement)\n        .getPropertyValue(`${/^\\-\\-/.test(prop) ? prop : \"--\" + prop}`);\n    },\n  },\n};\n</script>\n\n<style>\n:root {\n  --error-top: -70px;\n}\n.home-wrapper {\n  min-height: 580;\n  min-width: 300px;\n}\n.error-container {\n  max-height: 56px;\n  height: 56px;\n  margin-top: 0px;\n  box-sizing: border-box;\n  justify-content: center;\n  display: flex;\n  top: var(--error-top);\n  transition: top 160ms var(--quad) 20ms;\n  left: 0;\n  width: 100vw;\n  padding: 16px 10px 10px 10px;\n  background-color: var(--color-btn-toolbar-active);\n  position: absolute;\n  z-index: 99;\n}\n.error-content {\n  box-sizing: border-box;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-wrap: none;\n}\n\n.error-container .button.flat:hover {\n  background: transparent;\n  border-color: transparent;\n}\n\n.picker-row {\n  display: flex;\n  flex-wrap: none;\n  justify-content: center;\n  align-items: center;\n}\n.toggle-wrapper {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n\n.skeleton {\n  width: 100%;\n  box-sizing: border-box;\n  background: var(--button);\n}\n.input-contents.pseudo {\n  margin-top: -5px;\n}\n.skeleton-content {\n  box-sizing: border-box;\n  width: 100%;\n  padding-top: 56.25%;\n  height: 0px;\n  position: relative;\n  overflow: hidden;\n}\n\n.video-thumbnail {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: block;\n  width: 100%;\n  height: auto;\n}\n\n.placeholder {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.file-picker-clear-icon.input {\n  margin: 0px 0px 12px 0px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=2779ed4d&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nconst stream_1 = require(\"stream\");\nconst miniget_1 = __importDefault(require(\"miniget\"));\nconst m3u8_parser_1 = __importDefault(require(\"./m3u8-parser\"));\nconst dash_mpd_parser_1 = __importDefault(require(\"./dash-mpd-parser\"));\nconst queue_1 = require(\"./queue\");\nconst parse_time_1 = require(\"./parse-time\");\nconst supportedParsers = {\n    m3u8: m3u8_parser_1.default,\n    'dash-mpd': dash_mpd_parser_1.default,\n};\nlet m3u8stream = ((playlistURL, options = {}) => {\n    const stream = new stream_1.PassThrough({ highWaterMark: options.highWaterMark });\n    const chunkReadahead = options.chunkReadahead || 3;\n    // 20 seconds.\n    const liveBuffer = options.liveBuffer || 20000;\n    const requestOptions = options.requestOptions;\n    const Parser = supportedParsers[options.parser || (/\\.mpd$/.test(playlistURL) ? 'dash-mpd' : 'm3u8')];\n    if (!Parser) {\n        throw TypeError(`parser '${options.parser}' not supported`);\n    }\n    let begin = 0;\n    if (typeof options.begin !== 'undefined') {\n        begin = typeof options.begin === 'string' ?\n            parse_time_1.humanStr(options.begin) :\n            Math.max(options.begin - liveBuffer, 0);\n    }\n    const forwardEvents = (req) => {\n        for (let event of ['abort', 'request', 'response', 'redirect', 'retry', 'reconnect']) {\n            req.on(event, stream.emit.bind(stream, event));\n        }\n    };\n    let currSegment;\n    const streamQueue = new queue_1.Queue((req, callback) => {\n        currSegment = req;\n        // Count the size manually, since the `content-length` header is not\n        // always there.\n        let size = 0;\n        req.on('data', (chunk) => size += chunk.length);\n        req.pipe(stream, { end: false });\n        req.on('end', () => callback(null, size));\n    }, { concurrency: 1 });\n    let segmentNumber = 0;\n    let downloaded = 0;\n    const requestQueue = new queue_1.Queue((segment, callback) => {\n        let reqOptions = Object.assign({}, requestOptions);\n        if (segment.range) {\n            reqOptions.headers = Object.assign({}, reqOptions.headers, {\n                Range: `bytes=${segment.range.start}-${segment.range.end}`,\n            });\n        }\n        let req = miniget_1.default(new URL(segment.url, playlistURL).toString(), reqOptions);\n        req.on('error', callback);\n        forwardEvents(req);\n        streamQueue.push(req, (_, size) => {\n            downloaded += +size;\n            stream.emit('progress', {\n                num: ++segmentNumber,\n                size: size,\n                duration: segment.duration,\n                url: segment.url,\n            }, requestQueue.total, downloaded);\n            callback(null);\n        });\n    }, { concurrency: chunkReadahead });\n    const onError = (err) => {\n        stream.emit('error', err);\n        // Stop on any error.\n        stream.end();\n    };\n    // When to look for items again.\n    let refreshThreshold;\n    let minRefreshTime;\n    let refreshTimeout;\n    let fetchingPlaylist = true;\n    let ended = false;\n    let isStatic = false;\n    let lastRefresh;\n    const onQueuedEnd = (err) => {\n        currSegment = null;\n        if (err) {\n            onError(err);\n        }\n        else if (!fetchingPlaylist && !ended && !isStatic &&\n            requestQueue.tasks.length + requestQueue.active <= refreshThreshold) {\n            let ms = Math.max(0, minRefreshTime - (Date.now() - lastRefresh));\n            fetchingPlaylist = true;\n            refreshTimeout = setTimeout(refreshPlaylist, ms);\n        }\n        else if ((ended || isStatic) &&\n            !requestQueue.tasks.length && !requestQueue.active) {\n            stream.end();\n        }\n    };\n    let currPlaylist;\n    let lastSeq;\n    let starttime = 0;\n    const refreshPlaylist = () => {\n        lastRefresh = Date.now();\n        currPlaylist = miniget_1.default(playlistURL, requestOptions);\n        currPlaylist.on('error', onError);\n        forwardEvents(currPlaylist);\n        const parser = currPlaylist.pipe(new Parser(options.id));\n        parser.on('starttime', (a) => {\n            if (starttime) {\n                return;\n            }\n            starttime = a;\n            if (typeof options.begin === 'string' && begin >= 0) {\n                begin += starttime;\n            }\n        });\n        parser.on('endlist', () => { isStatic = true; });\n        parser.on('endearly', currPlaylist.unpipe.bind(currPlaylist, parser));\n        let addedItems = [];\n        const addItem = (item) => {\n            if (!item.init) {\n                if (item.seq <= lastSeq) {\n                    return;\n                }\n                lastSeq = item.seq;\n            }\n            begin = item.time;\n            requestQueue.push(item, onQueuedEnd);\n            addedItems.push(item);\n        };\n        let tailedItems = [], tailedItemsDuration = 0;\n        parser.on('item', (item) => {\n            let timedItem = Object.assign({ time: starttime }, item);\n            if (begin <= timedItem.time) {\n                addItem(timedItem);\n            }\n            else {\n                tailedItems.push(timedItem);\n                tailedItemsDuration += timedItem.duration;\n                // Only keep the last `liveBuffer` of items.\n                while (tailedItems.length > 1 &&\n                    tailedItemsDuration - tailedItems[0].duration > liveBuffer) {\n                    const lastItem = tailedItems.shift();\n                    tailedItemsDuration -= lastItem.duration;\n                }\n            }\n            starttime += timedItem.duration;\n        });\n        parser.on('end', () => {\n            currPlaylist = null;\n            // If we are too ahead of the stream, make sure to get the\n            // latest available items with a small buffer.\n            if (!addedItems.length && tailedItems.length) {\n                tailedItems.forEach(item => { addItem(item); });\n            }\n            // Refresh the playlist when remaining segments get low.\n            refreshThreshold = Math.max(1, Math.ceil(addedItems.length * 0.01));\n            // Throttle refreshing the playlist by looking at the duration\n            // of live items added on this refresh.\n            minRefreshTime =\n                addedItems.reduce((total, item) => item.duration + total, 0);\n            fetchingPlaylist = false;\n            onQueuedEnd(null);\n        });\n    };\n    refreshPlaylist();\n    stream.end = () => {\n        ended = true;\n        streamQueue.die();\n        requestQueue.die();\n        clearTimeout(refreshTimeout);\n        currPlaylist === null || currPlaylist === void 0 ? void 0 : currPlaylist.destroy();\n        currSegment === null || currSegment === void 0 ? void 0 : currSegment.destroy();\n        stream_1.PassThrough.prototype.end.call(stream, null);\n        return stream;\n    };\n    return stream;\n});\nm3u8stream.parseTimestamp = parse_time_1.humanStr;\nmodule.exports = m3u8stream;\n//# sourceMappingURL=index.js.map","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=css&\"","/**\n * http://en.wikipedia.org/wiki/YouTube#Quality_and_formats\n */\nmodule.exports = {\n\n  5: {\n    mimeType: 'video/flv; codecs=\"Sorenson H.283, mp3\"',\n    qualityLabel: '240p',\n    bitrate: 250000,\n    audioBitrate: 64,\n  },\n\n  6: {\n    mimeType: 'video/flv; codecs=\"Sorenson H.263, mp3\"',\n    qualityLabel: '270p',\n    bitrate: 800000,\n    audioBitrate: 64,\n  },\n\n  13: {\n    mimeType: 'video/3gp; codecs=\"MPEG-4 Visual, aac\"',\n    qualityLabel: null,\n    bitrate: 500000,\n    audioBitrate: null,\n  },\n\n  17: {\n    mimeType: 'video/3gp; codecs=\"MPEG-4 Visual, aac\"',\n    qualityLabel: '144p',\n    bitrate: 50000,\n    audioBitrate: 24,\n  },\n\n  18: {\n    mimeType: 'video/mp4; codecs=\"H.264, aac\"',\n    qualityLabel: '360p',\n    bitrate: 500000,\n    audioBitrate: 96,\n  },\n\n  22: {\n    mimeType: 'video/mp4; codecs=\"H.264, aac\"',\n    qualityLabel: '720p',\n    bitrate: 2000000,\n    audioBitrate: 192,\n  },\n\n  34: {\n    mimeType: 'video/flv; codecs=\"H.264, aac\"',\n    qualityLabel: '360p',\n    bitrate: 500000,\n    audioBitrate: 128,\n  },\n\n  35: {\n    mimeType: 'video/flv; codecs=\"H.264, aac\"',\n    qualityLabel: '480p',\n    bitrate: 800000,\n    audioBitrate: 128,\n  },\n\n  36: {\n    mimeType: 'video/3gp; codecs=\"MPEG-4 Visual, aac\"',\n    qualityLabel: '240p',\n    bitrate: 175000,\n    audioBitrate: 32,\n  },\n\n  37: {\n    mimeType: 'video/mp4; codecs=\"H.264, aac\"',\n    qualityLabel: '1080p',\n    bitrate: 3000000,\n    audioBitrate: 192,\n  },\n\n  38: {\n    mimeType: 'video/mp4; codecs=\"H.264, aac\"',\n    qualityLabel: '3072p',\n    bitrate: 3500000,\n    audioBitrate: 192,\n  },\n\n  43: {\n    mimeType: 'video/webm; codecs=\"VP8, vorbis\"',\n    qualityLabel: '360p',\n    bitrate: 500000,\n    audioBitrate: 128,\n  },\n\n  44: {\n    mimeType: 'video/webm; codecs=\"VP8, vorbis\"',\n    qualityLabel: '480p',\n    bitrate: 1000000,\n    audioBitrate: 128,\n  },\n\n  45: {\n    mimeType: 'video/webm; codecs=\"VP8, vorbis\"',\n    qualityLabel: '720p',\n    bitrate: 2000000,\n    audioBitrate: 192,\n  },\n\n  46: {\n    mimeType: 'audio/webm; codecs=\"vp8, vorbis\"',\n    qualityLabel: '1080p',\n    bitrate: null,\n    audioBitrate: 192,\n  },\n\n  82: {\n    mimeType: 'video/mp4; codecs=\"H.264, aac\"',\n    qualityLabel: '360p',\n    bitrate: 500000,\n    audioBitrate: 96,\n  },\n\n  83: {\n    mimeType: 'video/mp4; codecs=\"H.264, aac\"',\n    qualityLabel: '240p',\n    bitrate: 500000,\n    audioBitrate: 96,\n  },\n\n  84: {\n    mimeType: 'video/mp4; codecs=\"H.264, aac\"',\n    qualityLabel: '720p',\n    bitrate: 2000000,\n    audioBitrate: 192,\n  },\n\n  85: {\n    mimeType: 'video/mp4; codecs=\"H.264, aac\"',\n    qualityLabel: '1080p',\n    bitrate: 3000000,\n    audioBitrate: 192,\n  },\n\n  91: {\n    mimeType: 'video/ts; codecs=\"H.264, aac\"',\n    qualityLabel: '144p',\n    bitrate: 100000,\n    audioBitrate: 48,\n  },\n\n  92: {\n    mimeType: 'video/ts; codecs=\"H.264, aac\"',\n    qualityLabel: '240p',\n    bitrate: 150000,\n    audioBitrate: 48,\n  },\n\n  93: {\n    mimeType: 'video/ts; codecs=\"H.264, aac\"',\n    qualityLabel: '360p',\n    bitrate: 500000,\n    audioBitrate: 128,\n  },\n\n  94: {\n    mimeType: 'video/ts; codecs=\"H.264, aac\"',\n    qualityLabel: '480p',\n    bitrate: 800000,\n    audioBitrate: 128,\n  },\n\n  95: {\n    mimeType: 'video/ts; codecs=\"H.264, aac\"',\n    qualityLabel: '720p',\n    bitrate: 1500000,\n    audioBitrate: 256,\n  },\n\n  96: {\n    mimeType: 'video/ts; codecs=\"H.264, aac\"',\n    qualityLabel: '1080p',\n    bitrate: 2500000,\n    audioBitrate: 256,\n  },\n\n  100: {\n    mimeType: 'audio/webm; codecs=\"VP8, vorbis\"',\n    qualityLabel: '360p',\n    bitrate: null,\n    audioBitrate: 128,\n  },\n\n  101: {\n    mimeType: 'audio/webm; codecs=\"VP8, vorbis\"',\n    qualityLabel: '360p',\n    bitrate: null,\n    audioBitrate: 192,\n  },\n\n  102: {\n    mimeType: 'audio/webm; codecs=\"VP8, vorbis\"',\n    qualityLabel: '720p',\n    bitrate: null,\n    audioBitrate: 192,\n  },\n\n  120: {\n    mimeType: 'video/flv; codecs=\"H.264, aac\"',\n    qualityLabel: '720p',\n    bitrate: 2000000,\n    audioBitrate: 128,\n  },\n\n  127: {\n    mimeType: 'audio/ts; codecs=\"aac\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 96,\n  },\n\n  128: {\n    mimeType: 'audio/ts; codecs=\"aac\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 96,\n  },\n\n  132: {\n    mimeType: 'video/ts; codecs=\"H.264, aac\"',\n    qualityLabel: '240p',\n    bitrate: 150000,\n    audioBitrate: 48,\n  },\n\n  133: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '240p',\n    bitrate: 200000,\n    audioBitrate: null,\n  },\n\n  134: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '360p',\n    bitrate: 300000,\n    audioBitrate: null,\n  },\n\n  135: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '480p',\n    bitrate: 500000,\n    audioBitrate: null,\n  },\n\n  136: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '720p',\n    bitrate: 1000000,\n    audioBitrate: null,\n  },\n\n  137: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '1080p',\n    bitrate: 2500000,\n    audioBitrate: null,\n  },\n\n  138: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '4320p',\n    bitrate: 13500000,\n    audioBitrate: null,\n  },\n\n  139: {\n    mimeType: 'audio/mp4; codecs=\"aac\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 48,\n  },\n\n  140: {\n    mimeType: 'audio/m4a; codecs=\"aac\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 128,\n  },\n\n  141: {\n    mimeType: 'audio/mp4; codecs=\"aac\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 256,\n  },\n\n  151: {\n    mimeType: 'video/ts; codecs=\"H.264, aac\"',\n    qualityLabel: '720p',\n    bitrate: 50000,\n    audioBitrate: 24,\n  },\n\n  160: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '144p',\n    bitrate: 100000,\n    audioBitrate: null,\n  },\n\n  171: {\n    mimeType: 'audio/webm; codecs=\"vorbis\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 128,\n  },\n\n  172: {\n    mimeType: 'audio/webm; codecs=\"vorbis\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 192,\n  },\n\n  242: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '240p',\n    bitrate: 100000,\n    audioBitrate: null,\n  },\n\n  243: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '360p',\n    bitrate: 250000,\n    audioBitrate: null,\n  },\n\n  244: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '480p',\n    bitrate: 500000,\n    audioBitrate: null,\n  },\n\n  247: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '720p',\n    bitrate: 700000,\n    audioBitrate: null,\n  },\n\n  248: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '1080p',\n    bitrate: 1500000,\n    audioBitrate: null,\n  },\n\n  249: {\n    mimeType: 'audio/webm; codecs=\"opus\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 48,\n  },\n\n  250: {\n    mimeType: 'audio/webm; codecs=\"opus\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 64,\n  },\n\n  251: {\n    mimeType: 'audio/webm; codecs=\"opus\"',\n    qualityLabel: null,\n    bitrate: null,\n    audioBitrate: 160,\n  },\n\n  264: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '1440p',\n    bitrate: 4000000,\n    audioBitrate: null,\n  },\n\n  266: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '2160p',\n    bitrate: 12500000,\n    audioBitrate: null,\n  },\n\n  271: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '1440p',\n    bitrate: 9000000,\n    audioBitrate: null,\n  },\n\n  272: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '4320p',\n    bitrate: 20000000,\n    audioBitrate: null,\n  },\n\n  278: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '144p 30fps',\n    bitrate: 80000,\n    audioBitrate: null,\n  },\n\n  298: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '720p',\n    bitrate: 3000000,\n    audioBitrate: null,\n  },\n\n  299: {\n    mimeType: 'video/mp4; codecs=\"H.264\"',\n    qualityLabel: '1080p',\n    bitrate: 5500000,\n    audioBitrate: null,\n  },\n\n  300: {\n    mimeType: 'video/ts; codecs=\"H.264, aac\"',\n    qualityLabel: '720p',\n    bitrate: 1318000,\n    audioBitrate: 48,\n  },\n\n  302: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '720p HFR',\n    bitrate: 2500000,\n    audioBitrate: null,\n  },\n\n  303: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '1080p HFR',\n    bitrate: 5000000,\n    audioBitrate: null,\n  },\n\n  308: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '1440p HFR',\n    bitrate: 10000000,\n    audioBitrate: null,\n  },\n\n  313: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '2160p',\n    bitrate: 13000000,\n    audioBitrate: null,\n  },\n\n  315: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '2160p HFR',\n    bitrate: 20000000,\n    audioBitrate: null,\n  },\n\n  330: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '144p HDR, HFR',\n    bitrate: 80000,\n    audioBitrate: null,\n  },\n\n  331: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '240p HDR, HFR',\n    bitrate: 100000,\n    audioBitrate: null,\n  },\n\n  332: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '360p HDR, HFR',\n    bitrate: 250000,\n    audioBitrate: null,\n  },\n\n  333: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '240p HDR, HFR',\n    bitrate: 500000,\n    audioBitrate: null,\n  },\n\n  334: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '720p HDR, HFR',\n    bitrate: 1000000,\n    audioBitrate: null,\n  },\n\n  335: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '1080p HDR, HFR',\n    bitrate: 1500000,\n    audioBitrate: null,\n  },\n\n  336: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '1440p HDR, HFR',\n    bitrate: 5000000,\n    audioBitrate: null,\n  },\n\n  337: {\n    mimeType: 'video/webm; codecs=\"VP9\"',\n    qualityLabel: '2160p HDR, HFR',\n    bitrate: 12000000,\n    audioBitrate: null,\n  },\n\n};\n","const utils = require('./utils');\nconst qs = require('querystring');\nconst { parseTimestamp } = require('m3u8stream');\n\n\nconst BASE_URL = 'https://www.youtube.com/watch?v=';\nconst TITLE_TO_CATEGORY = {\n  song: { name: 'Music', url: 'https://music.youtube.com/' },\n};\n\nconst getText = obj => obj ? obj.runs ? obj.runs[0].text : obj.simpleText : null;\n\n\n/**\n * Get video media.\n *\n * @param {Object} info\n * @returns {Object}\n */\nexports.getMedia = info => {\n  let media = {};\n  let results = [];\n  try {\n    results = info.response.contents.twoColumnWatchNextResults.results.results.contents;\n  } catch (err) {\n    // Do nothing\n  }\n\n  let result = results.find(v => v.videoSecondaryInfoRenderer);\n  if (!result) { return {}; }\n\n  try {\n    let metadataRows =\n      (result.metadataRowContainer || result.videoSecondaryInfoRenderer.metadataRowContainer)\n        .metadataRowContainerRenderer.rows;\n    for (let row of metadataRows) {\n      if (row.metadataRowRenderer) {\n        let title = getText(row.metadataRowRenderer.title).toLowerCase();\n        let contents = row.metadataRowRenderer.contents[0];\n        media[title] = getText(contents);\n        let runs = contents.runs;\n        if (runs && runs[0].navigationEndpoint) {\n          media[`${title}_url`] = new URL(\n            runs[0].navigationEndpoint.commandMetadata.webCommandMetadata.url, BASE_URL).toString();\n        }\n        if (title in TITLE_TO_CATEGORY) {\n          media.category = TITLE_TO_CATEGORY[title].name;\n          media.category_url = TITLE_TO_CATEGORY[title].url;\n        }\n      } else if (row.richMetadataRowRenderer) {\n        let contents = row.richMetadataRowRenderer.contents;\n        let boxArt = contents\n          .filter(meta => meta.richMetadataRenderer.style === 'RICH_METADATA_RENDERER_STYLE_BOX_ART');\n        for (let { richMetadataRenderer } of boxArt) {\n          let meta = richMetadataRenderer;\n          media.year = getText(meta.subtitle);\n          let type = getText(meta.callToAction).split(' ')[1];\n          media[type] = getText(meta.title);\n          media[`${type}_url`] = new URL(\n            meta.endpoint.commandMetadata.webCommandMetadata.url, BASE_URL).toString();\n          media.thumbnails = meta.thumbnail.thumbnails;\n        }\n        let topic = contents\n          .filter(meta => meta.richMetadataRenderer.style === 'RICH_METADATA_RENDERER_STYLE_TOPIC');\n        for (let { richMetadataRenderer } of topic) {\n          let meta = richMetadataRenderer;\n          media.category = getText(meta.title);\n          media.category_url = new URL(\n            meta.endpoint.commandMetadata.webCommandMetadata.url, BASE_URL).toString();\n        }\n      }\n    }\n  } catch (err) {\n    // Do nothing.\n  }\n\n  return media;\n};\n\n\nconst isVerified = badges => !!(badges && badges.find(b => b.metadataBadgeRenderer.tooltip === 'Verified'));\n\n\n/**\n * Get video author.\n *\n * @param {Object} info\n * @returns {Object}\n */\nexports.getAuthor = info => {\n  let channelId, thumbnails = [], subscriberCount, verified = false;\n  try {\n    let results = info.response.contents.twoColumnWatchNextResults.results.results.contents;\n    let v = results.find(v2 =>\n      v2.videoSecondaryInfoRenderer &&\n      v2.videoSecondaryInfoRenderer.owner &&\n      v2.videoSecondaryInfoRenderer.owner.videoOwnerRenderer);\n    let videoOwnerRenderer = v.videoSecondaryInfoRenderer.owner.videoOwnerRenderer;\n    channelId = videoOwnerRenderer.navigationEndpoint.browseEndpoint.browseId;\n    thumbnails = videoOwnerRenderer.thumbnail.thumbnails.map(thumbnail => {\n      thumbnail.url = new URL(thumbnail.url, BASE_URL).toString();\n      return thumbnail;\n    });\n    subscriberCount = utils.parseAbbreviatedNumber(getText(videoOwnerRenderer.subscriberCountText));\n    verified = isVerified(videoOwnerRenderer.badges);\n  } catch (err) {\n    // Do nothing.\n  }\n  try {\n    let videoDetails = info.player_response.microformat && info.player_response.microformat.playerMicroformatRenderer;\n    let id = (videoDetails && videoDetails.channelId) || channelId || info.player_response.videoDetails.channelId;\n    let author = {\n      id: id,\n      name: videoDetails ? videoDetails.ownerChannelName : info.player_response.videoDetails.author,\n      user: videoDetails ? videoDetails.ownerProfileUrl.split('/').slice(-1)[0] : null,\n      channel_url: `https://www.youtube.com/channel/${id}`,\n      external_channel_url: videoDetails ? `https://www.youtube.com/channel/${videoDetails.externalChannelId}` : '',\n      user_url: videoDetails ? new URL(videoDetails.ownerProfileUrl, BASE_URL).toString() : '',\n      thumbnails,\n      verified,\n      subscriber_count: subscriberCount,\n    };\n    if (thumbnails.length) {\n      utils.deprecate(author, 'avatar', author.thumbnails[0].url, 'author.avatar', 'author.thumbnails[0].url');\n    }\n    return author;\n  } catch (err) {\n    return {};\n  }\n};\n\nconst parseRelatedVideo = (details, rvsParams) => {\n  if (!details) return;\n  try {\n    let viewCount = getText(details.viewCountText);\n    let shortViewCount = getText(details.shortViewCountText);\n    let rvsDetails = rvsParams.find(elem => elem.id === details.videoId);\n    if (!/^\\d/.test(shortViewCount)) {\n      shortViewCount = (rvsDetails && rvsDetails.short_view_count_text) || '';\n    }\n    viewCount = (/^\\d/.test(viewCount) ? viewCount : shortViewCount).split(' ')[0];\n    let browseEndpoint = details.shortBylineText.runs[0].navigationEndpoint.browseEndpoint;\n    let channelId = browseEndpoint.browseId;\n    let name = getText(details.shortBylineText);\n    let user = (browseEndpoint.canonicalBaseUrl || '').split('/').slice(-1)[0];\n    let video = {\n      id: details.videoId,\n      title: getText(details.title),\n      published: getText(details.publishedTimeText),\n      author: {\n        id: channelId,\n        name,\n        user,\n        channel_url: `https://www.youtube.com/channel/${channelId}`,\n        user_url: `https://www.youtube.com/user/${user}`,\n        thumbnails: details.channelThumbnail.thumbnails.map(thumbnail => {\n          thumbnail.url = new URL(thumbnail.url, BASE_URL).toString();\n          return thumbnail;\n        }),\n        verified: isVerified(details.ownerBadges),\n\n        [Symbol.toPrimitive]() {\n          console.warn(`\\`relatedVideo.author\\` will be removed in a near future release, ` +\n            `use \\`relatedVideo.author.name\\` instead.`);\n          return video.author.name;\n        },\n\n      },\n      short_view_count_text: shortViewCount.split(' ')[0],\n      view_count: viewCount.replace(/,/g, ''),\n      length_seconds: details.lengthText ?\n        Math.floor(parseTimestamp(getText(details.lengthText)) / 1000) :\n        rvsParams && `${rvsParams.length_seconds}`,\n      thumbnails: details.thumbnail.thumbnails,\n      richThumbnails:\n        details.richThumbnail ?\n          details.richThumbnail.movingThumbnailRenderer.movingThumbnailDetails.thumbnails : [],\n      isLive: !!(details.badges && details.badges.find(b => b.metadataBadgeRenderer.label === 'LIVE NOW')),\n    };\n\n    utils.deprecate(video, 'author_thumbnail', video.author.thumbnails[0].url,\n      'relatedVideo.author_thumbnail', 'relatedVideo.author.thumbnails[0].url');\n    utils.deprecate(video, 'ucid', video.author.id, 'relatedVideo.ucid', 'relatedVideo.author.id');\n    utils.deprecate(video, 'video_thumbnail', video.thumbnails[0].url,\n      'relatedVideo.video_thumbnail', 'relatedVideo.thumbnails[0].url');\n    return video;\n  } catch (err) {\n    // Skip.\n  }\n};\n\n/**\n * Get related videos.\n *\n * @param {Object} info\n * @returns {Array.<Object>}\n */\nexports.getRelatedVideos = info => {\n  let rvsParams = [], secondaryResults = [];\n  try {\n    rvsParams = info.response.webWatchNextResponseExtensionData.relatedVideoArgs.split(',').map(e => qs.parse(e));\n  } catch (err) {\n    // Do nothing.\n  }\n  try {\n    secondaryResults = info.response.contents.twoColumnWatchNextResults.secondaryResults.secondaryResults.results;\n  } catch (err) {\n    return [];\n  }\n  let videos = [];\n  for (let result of secondaryResults || []) {\n    let details = result.compactVideoRenderer;\n    if (details) {\n      let video = parseRelatedVideo(details, rvsParams);\n      if (video) videos.push(video);\n    } else {\n      let autoplay = result.compactAutoplayRenderer || result.itemSectionRenderer;\n      if (!autoplay || !Array.isArray(autoplay.contents)) continue;\n      for (let content of autoplay.contents) {\n        let video = parseRelatedVideo(content.compactVideoRenderer, rvsParams);\n        if (video) videos.push(video);\n      }\n    }\n  }\n  return videos;\n};\n\n/**\n * Get like count.\n *\n * @param {Object} info\n * @returns {number}\n */\nexports.getLikes = info => {\n  try {\n    let contents = info.response.contents.twoColumnWatchNextResults.results.results.contents;\n    let video = contents.find(r => r.videoPrimaryInfoRenderer);\n    let buttons = video.videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons;\n    let like = buttons.find(b => b.toggleButtonRenderer &&\n      b.toggleButtonRenderer.defaultIcon.iconType === 'LIKE');\n    return parseInt(like.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\\D+/g, ''));\n  } catch (err) {\n    return null;\n  }\n};\n\n/**\n * Get dislike count.\n *\n * @param {Object} info\n * @returns {number}\n */\nexports.getDislikes = info => {\n  try {\n    let contents = info.response.contents.twoColumnWatchNextResults.results.results.contents;\n    let video = contents.find(r => r.videoPrimaryInfoRenderer);\n    let buttons = video.videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons;\n    let dislike = buttons.find(b => b.toggleButtonRenderer &&\n      b.toggleButtonRenderer.defaultIcon.iconType === 'DISLIKE');\n    return parseInt(dislike.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\\D+/g, ''));\n  } catch (err) {\n    return null;\n  }\n};\n\n/**\n * Cleans up a few fields on `videoDetails`.\n *\n * @param {Object} videoDetails\n * @param {Object} info\n * @returns {Object}\n */\nexports.cleanVideoDetails = (videoDetails, info) => {\n  videoDetails.thumbnails = videoDetails.thumbnail.thumbnails;\n  delete videoDetails.thumbnail;\n  utils.deprecate(videoDetails, 'thumbnail', { thumbnails: videoDetails.thumbnails },\n    'videoDetails.thumbnail.thumbnails', 'videoDetails.thumbnails');\n  videoDetails.description = videoDetails.shortDescription || getText(videoDetails.description);\n  delete videoDetails.shortDescription;\n  utils.deprecate(videoDetails, 'shortDescription', videoDetails.description,\n    'videoDetails.shortDescription', 'videoDetails.description');\n\n  // Use more reliable `lengthSeconds` from `playerMicroformatRenderer`.\n  videoDetails.lengthSeconds =\n    (info.player_response.microformat &&\n    info.player_response.microformat.playerMicroformatRenderer.lengthSeconds) ||\n    info.player_response.videoDetails.lengthSeconds;\n  return videoDetails;\n};\n\n/**\n * Get storyboards info.\n *\n * @param {Object} info\n * @returns {Array.<Object>}\n */\nexports.getStoryboards = info => {\n  const parts = info.player_response.storyboards &&\n    info.player_response.storyboards.playerStoryboardSpecRenderer &&\n    info.player_response.storyboards.playerStoryboardSpecRenderer.spec &&\n    info.player_response.storyboards.playerStoryboardSpecRenderer.spec.split('|');\n\n  if (!parts) return [];\n\n  const url = new URL(parts.shift());\n\n  return parts.map((part, i) => {\n    let [\n      thumbnailWidth,\n      thumbnailHeight,\n      thumbnailCount,\n      columns,\n      rows,\n      interval,\n      nameReplacement,\n      sigh,\n    ] = part.split('#');\n\n    url.searchParams.set('sigh', sigh);\n\n    thumbnailCount = parseInt(thumbnailCount, 10);\n    columns = parseInt(columns, 10);\n    rows = parseInt(rows, 10);\n\n    const storyboardCount = Math.ceil(thumbnailCount / (columns * rows));\n\n    return {\n      templateUrl: url.toString().replace('$L', i).replace('$N', nameReplacement),\n      thumbnailWidth: parseInt(thumbnailWidth, 10),\n      thumbnailHeight: parseInt(thumbnailHeight, 10),\n      thumbnailCount,\n      interval: parseInt(interval, 10),\n      columns,\n      rows,\n      storyboardCount,\n    };\n  });\n};\n\n/**\n * Get chapters info.\n *\n * @param {Object} info\n * @returns {Array.<Object>}\n */\nexports.getChapters = info => {\n  const playerOverlayRenderer = info.response &&\n    info.response.playerOverlays &&\n    info.response.playerOverlays.playerOverlayRenderer;\n  const playerBar = playerOverlayRenderer &&\n    playerOverlayRenderer.decoratedPlayerBarRenderer &&\n    playerOverlayRenderer.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer &&\n    playerOverlayRenderer.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer.playerBar;\n  const markersMap = playerBar &&\n    playerBar.multiMarkersPlayerBarRenderer &&\n    playerBar.multiMarkersPlayerBarRenderer.markersMap;\n  const marker = Array.isArray(markersMap) && markersMap.find(m => m.value && Array.isArray(m.value.chapters));\n  if (!marker) return [];\n  const chapters = marker.value.chapters;\n\n  return chapters.map(chapter => ({\n    title: getText(chapter.chapterRenderer.title),\n    start_time: chapter.chapterRenderer.timeRangeStartMillis / 1000,\n  }));\n};\n","const utils = require('./utils');\nconst FORMATS = require('./formats');\n\n\n// Use these to help sort formats, higher index is better.\nconst audioEncodingRanks = [\n  'mp4a',\n  'mp3',\n  'vorbis',\n  'aac',\n  'opus',\n  'flac',\n];\nconst videoEncodingRanks = [\n  'mp4v',\n  'avc1',\n  'Sorenson H.283',\n  'MPEG-4 Visual',\n  'VP8',\n  'VP9',\n  'H.264',\n];\n\nconst getVideoBitrate = format => format.bitrate || 0;\nconst getVideoEncodingRank = format =>\n  videoEncodingRanks.findIndex(enc => format.codecs && format.codecs.includes(enc));\nconst getAudioBitrate = format => format.audioBitrate || 0;\nconst getAudioEncodingRank = format =>\n  audioEncodingRanks.findIndex(enc => format.codecs && format.codecs.includes(enc));\n\n\n/**\n * Sort formats by a list of functions.\n *\n * @param {Object} a\n * @param {Object} b\n * @param {Array.<Function>} sortBy\n * @returns {number}\n */\nconst sortFormatsBy = (a, b, sortBy) => {\n  let res = 0;\n  for (let fn of sortBy) {\n    res = fn(b) - fn(a);\n    if (res !== 0) {\n      break;\n    }\n  }\n  return res;\n};\n\n\nconst sortFormatsByVideo = (a, b) => sortFormatsBy(a, b, [\n  format => parseInt(format.qualityLabel),\n  getVideoBitrate,\n  getVideoEncodingRank,\n]);\n\n\nconst sortFormatsByAudio = (a, b) => sortFormatsBy(a, b, [\n  getAudioBitrate,\n  getAudioEncodingRank,\n]);\n\n\n/**\n * Sort formats from highest quality to lowest.\n *\n * @param {Object} a\n * @param {Object} b\n * @returns {number}\n */\nexports.sortFormats = (a, b) => sortFormatsBy(a, b, [\n  // Formats with both video and audio are ranked highest.\n  format => +!!format.isHLS,\n  format => +!!format.isDashMPD,\n  format => +(format.contentLength > 0),\n  format => +(format.hasVideo && format.hasAudio),\n  format => +format.hasVideo,\n  format => parseInt(format.qualityLabel) || 0,\n  getVideoBitrate,\n  getAudioBitrate,\n  getVideoEncodingRank,\n  getAudioEncodingRank,\n]);\n\n\n/**\n * Choose a format depending on the given options.\n *\n * @param {Array.<Object>} formats\n * @param {Object} options\n * @returns {Object}\n * @throws {Error} when no format matches the filter/format rules\n */\nexports.chooseFormat = (formats, options) => {\n  if (typeof options.format === 'object') {\n    if (!options.format.url) {\n      throw Error('Invalid format given, did you use `ytdl.getInfo()`?');\n    }\n    return options.format;\n  }\n\n  if (options.filter) {\n    formats = exports.filterFormats(formats, options.filter);\n  }\n\n  // We currently only support HLS-Formats for livestreams\n  // So we (now) remove all non-HLS streams\n  if (formats.some(fmt => fmt.isHLS)) {\n    formats = formats.filter(fmt => fmt.isHLS || !fmt.isLive);\n  }\n\n  let format;\n  const quality = options.quality || 'highest';\n  switch (quality) {\n    case 'highest':\n      format = formats[0];\n      break;\n\n    case 'lowest':\n      format = formats[formats.length - 1];\n      break;\n\n    case 'highestaudio': {\n      formats = exports.filterFormats(formats, 'audio');\n      formats.sort(sortFormatsByAudio);\n      // Filter for only the best audio format\n      const bestAudioFormat = formats[0];\n      formats = formats.filter(f => sortFormatsByAudio(bestAudioFormat, f) === 0);\n      // Check for the worst video quality for the best audio quality and pick according\n      // This does not loose default sorting of video encoding and bitrate\n      const worstVideoQuality = formats.map(f => parseInt(f.qualityLabel) || 0).sort((a, b) => a - b)[0];\n      format = formats.find(f => (parseInt(f.qualityLabel) || 0) === worstVideoQuality);\n      break;\n    }\n\n    case 'lowestaudio':\n      formats = exports.filterFormats(formats, 'audio');\n      formats.sort(sortFormatsByAudio);\n      format = formats[formats.length - 1];\n      break;\n\n    case 'highestvideo': {\n      formats = exports.filterFormats(formats, 'video');\n      formats.sort(sortFormatsByVideo);\n      // Filter for only the best video format\n      const bestVideoFormat = formats[0];\n      formats = formats.filter(f => sortFormatsByVideo(bestVideoFormat, f) === 0);\n      // Check for the worst audio quality for the best video quality and pick according\n      // This does not loose default sorting of audio encoding and bitrate\n      const worstAudioQuality = formats.map(f => f.audioBitrate || 0).sort((a, b) => a - b)[0];\n      format = formats.find(f => (f.audioBitrate || 0) === worstAudioQuality);\n      break;\n    }\n\n    case 'lowestvideo':\n      formats = exports.filterFormats(formats, 'video');\n      formats.sort(sortFormatsByVideo);\n      format = formats[formats.length - 1];\n      break;\n\n    default:\n      format = getFormatByQuality(quality, formats);\n      break;\n  }\n\n  if (!format) {\n    throw Error(`No such format found: ${quality}`);\n  }\n  return format;\n};\n\n/**\n * Gets a format based on quality or array of quality's\n *\n * @param {string|[string]} quality\n * @param {[Object]} formats\n * @returns {Object}\n */\nconst getFormatByQuality = (quality, formats) => {\n  let getFormat = itag => formats.find(format => `${format.itag}` === `${itag}`);\n  if (Array.isArray(quality)) {\n    return getFormat(quality.find(q => getFormat(q)));\n  } else {\n    return getFormat(quality);\n  }\n};\n\n\n/**\n * @param {Array.<Object>} formats\n * @param {Function} filter\n * @returns {Array.<Object>}\n */\nexports.filterFormats = (formats, filter) => {\n  let fn;\n  switch (filter) {\n    case 'videoandaudio':\n    case 'audioandvideo':\n      fn = format => format.hasVideo && format.hasAudio;\n      break;\n\n    case 'video':\n      fn = format => format.hasVideo;\n      break;\n\n    case 'videoonly':\n      fn = format => format.hasVideo && !format.hasAudio;\n      break;\n\n    case 'audio':\n      fn = format => format.hasAudio;\n      break;\n\n    case 'audioonly':\n      fn = format => !format.hasVideo && format.hasAudio;\n      break;\n\n    default:\n      if (typeof filter === 'function') {\n        fn = filter;\n      } else {\n        throw TypeError(`Given filter (${filter}) is not supported`);\n      }\n  }\n  return formats.filter(format => !!format.url && fn(format));\n};\n\n\n/**\n * @param {Object} format\n * @returns {Object}\n */\nexports.addFormatMeta = format => {\n  format = Object.assign({}, FORMATS[format.itag], format);\n  format.hasVideo = !!format.qualityLabel;\n  format.hasAudio = !!format.audioBitrate;\n  format.container = format.mimeType ?\n    format.mimeType.split(';')[0].split('/')[1] : null;\n  format.codecs = format.mimeType ?\n    utils.between(format.mimeType, 'codecs=\"', '\"') : null;\n  format.videoCodec = format.hasVideo && format.codecs ?\n    format.codecs.split(', ')[0] : null;\n  format.audioCodec = format.hasAudio && format.codecs ?\n    format.codecs.split(', ').slice(-1)[0] : null;\n  format.isLive = /\\bsource[/=]yt_live_broadcast\\b/.test(format.url);\n  format.isHLS = /\\/manifest\\/hls_(variant|playlist)\\//.test(format.url);\n  format.isDashMPD = /\\/manifest\\/dash\\//.test(format.url);\n  return format;\n};\n"],"sourceRoot":""}